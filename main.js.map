{"version":3,"file":"main.js","sources":["src/js/graficos.js","src/js/ranking.js","src/js/classificacio.js","src/js/init.js","src/js/torneig.js","src/js/calendari.js","src/js/partides.js","src/js/router.js","src/js/agenda.js","src/js/horari.js","src/js/enllacos.js","src/js/continu3b.js","src/js/sw-register.js","src/main.js"],"sourcesContent":["import { ranquing, lineChart, setLineChart, adjustChartSize } from './init.js';\n\nlet lastFocusedElement = null;\n\nexport function mostraEvolucioJugador(jugador, nom) {\n  const modalitats = ['3 BANDES', 'BANDA', 'LLIURE'];\n  const dadesPerMod = modalitats.map(mod =>\n    ranquing\n      .filter(r => r.Jugador === jugador && r.Modalitat === mod)\n      .map(r => ({ any: parseInt(r.Any, 10), mitjana: parseFloat(r.Mitjana) }))\n      .sort((a, b) => a.any - b.any)\n  );\n\n  const anys = [...new Set(dadesPerMod.flat().map(d => d.any))].sort(\n    (a, b) => a - b\n  );\n\n  const colors = ['blue', 'green', 'red'];\n  const datasets = modalitats.map((mod, idx) => {\n    const values = anys.map(y => {\n      const reg = dadesPerMod[idx].find(d => d.any === y);\n      return reg ? Number.parseFloat(reg.mitjana) : null;\n    });\n    return {\n      label: mod,\n      data: values,\n      borderColor: colors[idx],\n      backgroundColor: colors[idx],\n      tension: 0.2,\n      fill: false,\n    };\n  });\n\n  const canvas = document.getElementById('chart-canvas');\n  const overlay = document.getElementById('chart-overlay');\n  if (overlay) {\n    overlay.style.display = 'flex';\n    lastFocusedElement = document.activeElement;\n  }\n  const closeBtn = document.getElementById('close-chart');\n  if (closeBtn) {\n    closeBtn.focus();\n  }\n  adjustChartSize();\n\n  const title = document.getElementById('chart-title');\n  if (title) {\n    title.textContent = nom;\n  }\n\n  const ctx = canvas.getContext('2d');\n  if (lineChart) {\n    lineChart.destroy();\n  }\n  setLineChart(new Chart(ctx, {\n    type: 'line',\n    data: {\n      labels: anys,\n      datasets,\n    },\n    options: {\n      plugins: {\n        legend: {\n          position: 'right'\n        }\n      },\n      scales: {\n        x: {\n          title: { display: true, text: 'Any' },\n          ticks: { stepSize: 1, autoSkip: false }\n        },\n        y: {\n          title: { display: true, text: 'Mitjana' },\n          suggestedMin: (() => {\n            const all = datasets.flatMap(d => d.data).filter(v => v != null);\n            const min = all.length ? Math.min(...all) : 0;\n            return Math.floor((min - 0.1) * 10) / 10;\n          })(),\n          suggestedMax: (() => {\n            const all = datasets.flatMap(d => d.data).filter(v => v != null);\n            const max = all.length ? Math.max(...all) : 1;\n            return Math.ceil((max + 0.1) * 10) / 10;\n          })(),\n          ticks: { beginAtZero: false, stepSize: 0.1 }\n\n        }\n      },\n      responsive: true,\n      maintainAspectRatio: false\n    }\n  }));\n}\n\nexport function closeChart() {\n  document.getElementById('chart-overlay').style.display = 'none';\n  const title = document.getElementById('chart-title');\n  if (title) {\n    title.textContent = '';\n  }\n  if (lineChart) {\n    lineChart.destroy();\n    setLineChart(null);\n  }\n  if (lastFocusedElement) {\n    lastFocusedElement.focus();\n    lastFocusedElement = null;\n  }\n}\n\nexport function handleResize() {\n  const overlay = document.getElementById('chart-overlay');\n  if (overlay && overlay.style.display !== 'none') {\n    adjustChartSize();\n  }\n}\n","import { ranquing, anySeleccionat, modalitatSeleccionada, appendResponsiveTable } from './init.js';\nimport { mostraEvolucioJugador } from './graficos.js';\n\nexport function mostraRanquing() {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n  const taula = document.createElement('table');\n  const cap = document.createElement('tr');\n  ['Posició', 'Jugador', 'Mitjana'].forEach(t => {\n    const th = document.createElement('th');\n    th.textContent = t;\n    cap.appendChild(th);\n  });\n  taula.appendChild(cap);\n\n  const dadesOrdenades = ranquing\n    .filter(\n      reg =>\n        parseInt(reg.Any, 10) === anySeleccionat &&\n        reg.Modalitat === modalitatSeleccionada\n    )\n    .sort((a, b) => parseFloat(b.Mitjana) - parseFloat(a.Mitjana));\n\n  dadesOrdenades.forEach((reg, idx) => {\n    const tr = document.createElement('tr');\n    ['Posició', 'Jugador', 'Mitjana'].forEach(clau => {\n      const td = document.createElement('td');\n      let valor;\n      if (clau === 'Posició') {\n        valor = idx + 1;\n      } else if (clau === 'Mitjana') {\n        valor = Number.parseFloat(reg[clau]).toFixed(3);\n      } else {\n        valor = clau === 'Jugador' ? reg.NomComplet : reg[clau];\n      }\n      td.textContent = valor;\n      if (clau === 'Jugador') {\n        td.classList.add('player-cell');\n        td.addEventListener('click', e => {\n          e.stopPropagation();\n          mostraEvolucioJugador(reg.Jugador, reg.NomComplet);\n        });\n      }\n      tr.appendChild(td);\n    });\n    tr.addEventListener('click', () => {\n      mostraEvolucioJugador(reg.Jugador, reg.NomComplet);\n    });\n    taula.appendChild(tr);\n  });\n  appendResponsiveTable(cont, taula);\n}\n","import { classificacions, classAnySeleccionat, classModalitatSeleccionada, classCategoriaSeleccionada, appendResponsiveTable } from './init.js';\n\nexport function mostraClassificacio() {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n  const taula = document.createElement('table');\n  const cap = document.createElement('tr');\n  ['#', 'Jugador', 'PJ', 'P', 'C', 'E', 'MG', 'MM'].forEach(t => {\n    const th = document.createElement('th');\n    th.textContent = t;\n    cap.appendChild(th);\n  });\n  taula.appendChild(cap);\n\n  const dades = classificacions\n    .filter(\n      r =>\n        parseInt(r.Any, 10) === classAnySeleccionat &&\n        r.Modalitat === classModalitatSeleccionada &&\n        r.Categoria === classCategoriaSeleccionada\n    )\n    .sort((a, b) => parseInt(a.Posició, 10) - parseInt(b.Posició, 10));\n\n  dades.forEach(reg => {\n    const tr = document.createElement('tr');\n    const camps = [\n      reg['Posició'],\n      reg['Jugador'] || reg['Nom'] || '',\n      reg['PartidesJugades'] || reg['Partides jugades'] || reg['PJ'] || '',\n      reg['Punts'],\n      reg['Caramboles'],\n      reg['Entrades'],\n      reg['MitjanaGeneral'] || reg['Mitjana'] || '',\n      reg['MitjanaParticular'] || reg['Millor mitjana'] || ''\n    ];\n    camps.forEach((valor, idx) => {\n      const td = document.createElement('td');\n      if (idx >= 6 && valor !== '') {\n        const num = Number.parseFloat(valor);\n        valor = Number.isNaN(num) ? valor : num.toFixed(3);\n      }\n      td.textContent = valor;\n      tr.appendChild(td);\n    });\n    taula.appendChild(tr);\n  });\n  appendResponsiveTable(cont, taula);\n}\n","import { mostraRanquing } from './ranking.js';\nimport { mostraClassificacio } from './classificacio.js';\n\nexport let ranquing = [];\nexport let anys = [];\nexport let anySeleccionat = null;\nexport let modalitatSeleccionada = '3 BANDES';\nexport let lineChart = null;\n\nexport let classificacions = [];\nexport let classYears = [];\nexport let classAnySeleccionat = null;\nexport let classModalitatSeleccionada = '3 BANDES';\nexport let classCategoriaSeleccionada = null;\n\nexport let events = [];\nexport let agendaSetmanaInici = (() => {\n  const d = new Date();\n  d.setHours(0, 0, 0, 0);\n  d.setDate(d.getDate() - ((d.getDay() + 6) % 7));\n  return d;\n})();\nexport let torneigModalitat = '';\nexport let torneigCaramboles = {};\nexport let torneigCategoriaSeleccionada = null;\n\nexport function setLineChart(chart) {\n  lineChart = chart;\n}\n\nexport function appendResponsiveTable(container, table) {\n  const wrapper = document.createElement('div');\n  wrapper.className = 'table-responsive';\n  wrapper.appendChild(table);\n  container.appendChild(wrapper);\n}\n\nexport function adjustChartSize() {\n  const chartContainer = document.getElementById('player-chart');\n  if (chartContainer) {\n    chartContainer.style.width = '90vw';\n    chartContainer.style.height = '96vh';\n  }\n  const canvas = document.getElementById('chart-canvas');\n  if (canvas) {\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n  }\n  if (lineChart) {\n    lineChart.resize();\n  }\n}\n\nexport function inicialitza() {\n  Promise.all([\n    fetch('data/ranquing.json').then(r => r.json()),\n    fetch('data/classificacions.json').then(r => r.json()).catch(() => []),\n    fetch('data/events.json').then(r => r.json()).catch(() => []),\n    fetch('data/calendari.json').then(r => r.json()).catch(() => []),\n    fetch('data/festius.json').then(r => r.json()).catch(() => [])\n  ])\n    .then(([dadesRanking, dadesClass, dadesEvents, dadesCalendari, dadesFestius]) => {\n      ranquing = dadesRanking;\n      anys = [...new Set(dadesRanking.map(d => parseInt(d.Any, 10)))]\n        .sort((a, b) => a - b);\n      anySeleccionat = anys[anys.length - 1];\n\n      classificacions = dadesClass;\n      classYears = [...new Set(dadesClass.map(d => parseInt(d.Any, 10)))]\n        .sort((a, b) => a - b);\n      classAnySeleccionat = classYears[classYears.length - 1] || null;\n      const categories = new Set(dadesClass.map(d => d.Categoria));\n      classCategoriaSeleccionada = categories.values().next().value || null;\n\n      events = dadesEvents\n        .map(ev => {\n          const titol = ev['Títol'] || ev['Titol'] || '';\n          return {\n            ...ev,\n            'Títol': titol,\n            Tipus: titol.toLowerCase().includes('assemblea') ? 'assemblea' : 'altre'\n          };\n        })\n        .concat(\n          dadesCalendari.map(p => ({\n            Data: p.Data,\n            Hora: '',\n            Títol: `${p['Jugador A'].trim()} vs ${p['Jugador B'].trim()} (${p.Hora})`,\n            Tipus: 'partida'\n          }))\n        )\n        .concat(\n          dadesFestius.map(f => ({\n            Data: f.Data,\n            Hora: '',\n            Títol: `Foment tancat (${f.Títol || ''})`,\n            Tipus: 'festiu'\n          }))\n        );\n\n      preparaSelectors();\n      preparaSelectorsClassificacio();\n      document.getElementById('btn-agenda').click();\n    })\n    .catch(err => {\n      console.error('Error carregant dades', err);\n    });\n}\n\nexport function preparaSelectors() {\n  const select = document.getElementById('year-select');\n  select.innerHTML = '';\n  anys.slice().sort((a, b) => b - a).forEach(any => {\n    const opt = document.createElement('option');\n    opt.value = any;\n    opt.textContent = any;\n    if (any === anySeleccionat) opt.selected = true;\n    select.appendChild(opt);\n  });\n  select.addEventListener('change', () => {\n    anySeleccionat = parseInt(select.value, 10);\n    mostraRanquing();\n  });\n\n  const cont = document.getElementById('modalitat-buttons');\n  cont.querySelectorAll('button').forEach(btn => {\n    if (btn.dataset.mod === modalitatSeleccionada) {\n      btn.classList.add('selected');\n    }\n    btn.addEventListener('click', () => {\n      modalitatSeleccionada = btn.dataset.mod;\n      cont.querySelectorAll('button').forEach(b => b.classList.remove('selected'));\n      btn.classList.add('selected');\n      mostraRanquing();\n    });\n  });\n}\n\nexport function preparaSelectorsClassificacio() {\n  const yearSel = document.getElementById('classificacio-year-select');\n  yearSel.innerHTML = '';\n  classYears.slice().sort((a, b) => b - a).forEach(any => {\n    const opt = document.createElement('option');\n    opt.value = any;\n    opt.textContent = any;\n    if (any === classAnySeleccionat) opt.selected = true;\n    yearSel.appendChild(opt);\n  });\n  yearSel.addEventListener('change', () => {\n    classAnySeleccionat = parseInt(yearSel.value, 10);\n    mostraClassificacio();\n  });\n\n  const modalBtns = document.getElementById('classificacio-modalitat-buttons');\n  modalBtns.querySelectorAll('button').forEach(btn => {\n    if (btn.dataset.mod === classModalitatSeleccionada) {\n      btn.classList.add('selected');\n    }\n    btn.addEventListener('click', () => {\n      classModalitatSeleccionada = btn.dataset.mod;\n      modalBtns.querySelectorAll('button').forEach(b => b.classList.remove('selected'));\n      btn.classList.add('selected');\n      mostraClassificacio();\n    });\n  });\n\n  const catBtns = document.getElementById('categoria-buttons');\n  catBtns.innerHTML = '';\n  const cats = [...new Set(classificacions.map(c => c.Categoria))].sort();\n  cats.forEach(cat => {\n    const btn = document.createElement('button');\n    btn.textContent = cat;\n    if (cat === classCategoriaSeleccionada) btn.classList.add('selected');\n    btn.addEventListener('click', () => {\n      classCategoriaSeleccionada = cat;\n      catBtns.querySelectorAll('button').forEach(b => b.classList.remove('selected'));\n      btn.classList.add('selected');\n      mostraClassificacio();\n    });\n    catBtns.appendChild(btn);\n  });\n}\n\nexport function preparaTorneigCategories(categories, render) {\n  const cont = document.getElementById('torneig-category-buttons');\n  cont.innerHTML = '';\n  if (!categories || categories.length === 0) {\n    cont.style.display = 'none';\n    torneigCategoriaSeleccionada = null;\n    render();\n    return;\n  }\n  categories.sort();\n  if (!torneigCategoriaSeleccionada || !categories.includes(torneigCategoriaSeleccionada)) {\n    torneigCategoriaSeleccionada = categories[0];\n  }\n  categories.forEach(cat => {\n    const btn = document.createElement('button');\n    btn.textContent = `${cat}a`;\n    if (cat === torneigCategoriaSeleccionada) btn.classList.add('selected');\n    btn.addEventListener('click', () => {\n      torneigCategoriaSeleccionada = cat;\n      cont.querySelectorAll('button').forEach(b => b.classList.remove('selected'));\n      btn.classList.add('selected');\n      render();\n    });\n    cont.appendChild(btn);\n  });\n  cont.style.display = 'flex';\n  render();\n}\n","import { preparaTorneigCategories, appendResponsiveTable, torneigCategoriaSeleccionada, torneigCaramboles } from './init.js';\nimport { mostraCalendari } from './calendari.js';\nimport { mostraPartides } from './partides.js';\n\nexport function mostraTorneig(dades, file) {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n  const catCont = document.getElementById('torneig-category-buttons');\n  catCont.style.display = 'none';\n  catCont.innerHTML = '';\n\n  if (file === 'calendari.json') {\n    mostraCalendari(dades);\n    return;\n  }\n\n  if (file === 'partides.json') {\n    const categories = [...new Set(dades.map(p => p[\"🏆 Categoria de la partida\"]))];\n    preparaTorneigCategories(categories, () => mostraPartides(dades));\n    return;\n  }\n\n  if (!dades) {\n    return;\n  }\n  if (Array.isArray(dades) && dades.length === 0) {\n    const p = document.createElement('p');\n    p.textContent = 'No hi ha dades.';\n    cont.appendChild(p);\n    return;\n  }\n\n  if (\n    file !== 'classificacio.json' &&\n    Array.isArray(dades) &&\n    dades[0] &&\n    (('Categoria jugador' in dades[0] && 'Nom jugador' in dades[0]) ||\n      ('Categoria' in dades[0] && 'Nom' in dades[0]))\n  ) {\n    const catField = 'Categoria jugador' in dades[0] ? 'Categoria jugador' : 'Categoria';\n    const nomField = 'Nom jugador' in dades[0] ? 'Nom jugador' : 'Nom';\n    const agrupats = dades.reduce((acc, reg) => {\n      const cat = reg[catField];\n      if (!acc[cat]) acc[cat] = [];\n      acc[cat].push((reg[nomField] || '').trim());\n      return acc;\n    }, {});\n    const categories = Object.keys(agrupats);\n    const render = () => {\n      cont.innerHTML = '';\n      const cat = torneigCategoriaSeleccionada;\n      const h3 = document.createElement('h3');\n      const car = torneigCaramboles[cat];\n      h3.textContent = car\n        ? `${cat}a categoria (${car} caramboles)`\n        : `${cat}a categoria`;\n      cont.appendChild(h3);\n      const ul = document.createElement('ul');\n      (agrupats[cat] || []).forEach(nom => {\n        const li = document.createElement('li');\n        li.textContent = nom;\n        ul.appendChild(li);\n      });\n      cont.appendChild(ul);\n    };\n    preparaTorneigCategories(categories, render);\n    return;\n  }\n\n  if (file === 'classificacio.json' && Array.isArray(dades) && dades[0] && 'Posició' in dades[0]) {\n    const agrupats = dades.reduce((acc, reg) => {\n      const cat = reg.Categoria || '';\n      if (!acc[cat]) acc[cat] = [];\n      acc[cat].push(reg);\n      return acc;\n    }, {});\n    const categories = Object.keys(agrupats);\n    const render = () => {\n      cont.innerHTML = '';\n      const cat = torneigCategoriaSeleccionada;\n      const h3 = document.createElement('h3');\n      const car = torneigCaramboles[cat];\n      h3.textContent = car\n        ? `${cat}a categoria (${car} caramboles)`\n        : `${cat}a categoria`;\n      cont.appendChild(h3);\n      const taula = document.createElement('table');\n      const cap = document.createElement('tr');\n      ['#', 'Jugador', 'PJ', 'P', 'C', 'E', 'MG', 'MM'].forEach(t => {\n        const th = document.createElement('th');\n        th.textContent = t;\n        cap.appendChild(th);\n      });\n      taula.appendChild(cap);\n      (agrupats[cat] || [])\n        .sort((a, b) => {\n          const puntsA = parseInt(a['Punts'], 10) || 0;\n          const puntsB = parseInt(b['Punts'], 10) || 0;\n          if (puntsB !== puntsA) return puntsB - puntsA;\n          const mitjanaA = parseFloat(a['MitjanaGeneral'] || a['Mitjana'] || '0');\n          const mitjanaB = parseFloat(b['MitjanaGeneral'] || b['Mitjana'] || '0');\n          return mitjanaB - mitjanaA;\n        })\n        .forEach((reg, idx) => {\n          const tr = document.createElement('tr');\n          const camps = [\n            idx + 1,\n            reg['Nom'] || '',\n            reg['PartidesJugades'] || reg['Partides jugades'] || reg['PJ'] || '',\n            reg['Punts'],\n            reg['Caramboles'],\n            reg['Entrades'],\n            reg['MitjanaGeneral'] || reg['Mitjana'] || '',\n            reg['MitjanaParticular'] || reg['Millor mitjana'] || ''\n          ];\n          camps.forEach((valor, idx) => {\n            const td = document.createElement('td');\n            if (idx >= 6 && valor !== '') {\n              const num = Number.parseFloat(valor);\n              valor = Number.isNaN(num) ? valor : num.toFixed(3);\n            }\n            td.textContent = valor;\n            tr.appendChild(td);\n          });\n          taula.appendChild(tr);\n        });\n      appendResponsiveTable(cont, taula);\n    };\n    preparaTorneigCategories(categories, render);\n    return;\n  }\n\n  if (Array.isArray(dades) && dades[0] && 'Categoria' in dades[0]) {\n    const agrupats = dades.reduce((acc, reg) => {\n      const cat = reg.Categoria || '';\n      if (!acc[cat]) acc[cat] = [];\n      acc[cat].push(reg);\n      return acc;\n    }, {});\n    const headers = Object.keys(dades[0]).filter(h => h !== 'Categoria');\n    const categories = Object.keys(agrupats);\n    const render = () => {\n      cont.innerHTML = '';\n      const cat = torneigCategoriaSeleccionada;\n      const h3 = document.createElement('h3');\n      const car = torneigCaramboles[cat];\n      h3.textContent = car\n        ? `${cat}a categoria (${car} caramboles)`\n        : `${cat}a categoria`;\n      cont.appendChild(h3);\n      const taula = document.createElement('table');\n      const cap = document.createElement('tr');\n      headers.forEach(h => {\n        const th = document.createElement('th');\n        th.textContent = h;\n        cap.appendChild(th);\n      });\n      taula.appendChild(cap);\n      (agrupats[cat] || []).forEach(reg => {\n        const tr = document.createElement('tr');\n        headers.forEach(h => {\n          const td = document.createElement('td');\n          td.textContent = reg[h] || '';\n          tr.appendChild(td);\n        });\n        taula.appendChild(tr);\n      });\n      appendResponsiveTable(cont, taula);\n    };\n    preparaTorneigCategories(categories, render);\n    return;\n  }\n\n  if (Array.isArray(dades) && Array.isArray(dades[0])) {\n    const headers = dades[0];\n    const taula = document.createElement('table');\n    const cap = document.createElement('tr');\n    headers.forEach(h => {\n      const th = document.createElement('th');\n      th.textContent = h;\n      cap.appendChild(th);\n    });\n    taula.appendChild(cap);\n    dades.slice(1).forEach(row => {\n      const tr = document.createElement('tr');\n      headers.forEach((_, idx) => {\n        const td = document.createElement('td');\n        td.textContent = row[idx] || '';\n        tr.appendChild(td);\n      });\n      taula.appendChild(tr);\n    });\n    appendResponsiveTable(cont, taula);\n    return;\n  }\n\n  if (Array.isArray(dades) && typeof dades[0] === 'object') {\n    const headers = [...new Set(dades.flatMap(obj => Object.keys(obj)))];\n    const taula = document.createElement('table');\n    const cap = document.createElement('tr');\n    headers.forEach(h => {\n      const th = document.createElement('th');\n      th.textContent = h;\n      cap.appendChild(th);\n    });\n    taula.appendChild(cap);\n    dades.forEach(reg => {\n      const tr = document.createElement('tr');\n      headers.forEach(h => {\n        const td = document.createElement('td');\n        td.textContent = reg[h] || '';\n        tr.appendChild(td);\n      });\n      taula.appendChild(tr);\n    });\n    appendResponsiveTable(cont, taula);\n    return;\n  }\n\n  const pre = document.createElement('pre');\n  pre.textContent = JSON.stringify(dades, null, 2);\n  cont.appendChild(pre);\n}\n","import { appendResponsiveTable } from './init.js';\n\nexport function mostraCalendari(partides) {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n  if (!Array.isArray(partides)) {\n    cont.textContent = 'Dades de calendari no vàlides.';\n    return;\n  }\n  const programades = partides.filter(p => p.Data);\n  const pendents = partides.filter(p => !p.Data);\n\n  programades.sort((a, b) => {\n    const dataDiff = (a.Data || '').localeCompare(b.Data || '');\n    if (dataDiff !== 0) return dataDiff;\n    const horaDiff = (a.Hora || '').localeCompare(b.Hora || '');\n    if (horaDiff !== 0) return horaDiff;\n    const billarA = parseInt((a.Billar || '').match(/\\d+/), 10) || 0;\n    const billarB = parseInt((b.Billar || '').match(/\\d+/), 10) || 0;\n    return billarA - billarB;\n  });\n\n  const filters = document.createElement('div');\n  filters.id = 'calendari-filters';\n  const input = document.createElement('input');\n  input.id = 'calendari-player-filter';\n  input.type = 'text';\n  input.placeholder = 'Filtre Nom Jugador';\n  filters.appendChild(input);\n  cont.appendChild(filters);\n\n  const dataContainer = document.createElement('div');\n  cont.appendChild(dataContainer);\n\n  const mesos = {\n    '01': 'gen',\n    '02': 'feb',\n    '03': 'mar',\n    '04': 'abr',\n    '05': 'mai',\n    '06': 'jun',\n    '07': 'jul',\n    '08': 'ago',\n    '09': 'set',\n    '10': 'oct',\n    '11': 'nov',\n    '12': 'des'\n  };\n\n  function render(filtre = '') {\n    filtre = (filtre || '').toLowerCase();\n    dataContainer.innerHTML = '';\n\n    const progFiltrades = programades.filter(p => {\n      if (!filtre) return true;\n      const j1 = (p['Jugador A'] || '').trim().toLowerCase();\n      const j2 = (p['Jugador B'] || '').trim().toLowerCase();\n      return j1.includes(filtre) || j2.includes(filtre);\n    });\n\n    const dayCounts = progFiltrades.reduce((acc, p) => {\n      acc[p.Data] = (acc[p.Data] || 0) + 1;\n      return acc;\n    }, {});\n\n    const taula = document.createElement('table');\n\n    const cap = document.createElement('tr');\n    ['Data', 'Hora', 'Billar', 'Jugador A', 'Jugador B'].forEach(t => {\n      const th = document.createElement('th');\n      th.textContent = t;\n      cap.appendChild(th);\n    });\n    taula.appendChild(cap);\n\n    let lastData = null;\n    progFiltrades.forEach(p => {\n      const tr = document.createElement('tr');\n      if (p.Data !== lastData) {\n        const tdDia = document.createElement('td');\n        const [yyyy, mm, dd] = (p.Data || '').split('-');\n        const diaNum = parseInt(dd, 10);\n\n        const diaTxt = mm && diaNum ? `${diaNum}<br>${mesos[mm] || mm}` : '';\n        tdDia.innerHTML = diaTxt;\n\n        const count = dayCounts[p.Data];\n        if (count > 1) {\n          tdDia.rowSpan = count;\n          tdDia.classList.add('vertical-text');\n        }\n        tr.appendChild(tdDia);\n        lastData = p.Data;\n      }\n      const billar = (p.Billar || '').replace('Billar ', 'B');\n\n      let hora = p.Hora || '';\n      if (/^\\d{1,2}:00$/.test(hora)) {\n        hora = hora.split(':')[0];\n      }\n\n      [hora, billar, (p['Jugador A'] || '').trim(), (p['Jugador B'] || '').trim()].forEach(val => {\n        const td = document.createElement('td');\n        td.textContent = val;\n        tr.appendChild(td);\n      });\n      taula.appendChild(tr);\n    });\n\n    appendResponsiveTable(dataContainer, taula);\n\n    const pendFiltrades = pendents\n      .filter(p => {\n        if (!filtre) return true;\n        const j1 = (p['Jugador A'] || '').trim().toLowerCase();\n        const j2 = (p['Jugador B'] || '').trim().toLowerCase();\n        return j1.includes(filtre) || j2.includes(filtre);\n      })\n      .sort(\n        (a, b) =>\n          (parseInt(a.Jornada, 10) || 0) - (parseInt(b.Jornada, 10) || 0)\n      );\n\n    if (pendFiltrades.length > 0) {\n      const h3 = document.createElement('h3');\n      h3.textContent = 'Pendent de programar';\n      dataContainer.appendChild(h3);\n\n      const taulaPend = document.createElement('table');\n      const capPend = document.createElement('tr');\n      ['Jornada', 'J1', 'J2'].forEach(t => {\n        const th = document.createElement('th');\n        th.textContent = t;\n        capPend.appendChild(th);\n      });\n      taulaPend.appendChild(capPend);\n\n      pendFiltrades.forEach(p => {\n        const tr = document.createElement('tr');\n        [\n          p.Jornada || '',\n          (p['Jugador A'] || '').trim(),\n          (p['Jugador B'] || '').trim()\n        ].forEach(val => {\n          const td = document.createElement('td');\n          td.textContent = val;\n          tr.appendChild(td);\n        });\n        taulaPend.appendChild(tr);\n      });\n\n      appendResponsiveTable(dataContainer, taulaPend);\n    }\n  }\n\n  input.addEventListener('input', () => {\n    render(input.value.trim().toLowerCase());\n  });\n\n  render();\n}\n","import { appendResponsiveTable, torneigCategoriaSeleccionada } from './init.js';\n\nexport function mostraPartides(partides) {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n  if (!Array.isArray(partides)) {\n    cont.textContent = 'Dades de partides no vàlides.';\n    return;\n  }\n\n  partides.sort((a, b) => {\n    const dateA = new Date(a.Timestamp);\n    const dateB = new Date(b.Timestamp);\n    return dateB - dateA;\n  });\n\n  const filters = document.createElement('div');\n  filters.id = 'partides-filters';\n\n  const input = document.createElement('input');\n  input.id = 'partides-player-filter';\n  input.type = 'text';\n  input.placeholder = 'Filtre Nom Jugador';\n  filters.appendChild(input);\n\n  cont.appendChild(filters);\n\n  const list = document.createElement('div');\n  cont.appendChild(list);\n\n  function render(filtre = '') {\n    filtre = (filtre || '').toLowerCase();\n    list.innerHTML = '';\n    const filtered = partides\n      .filter(p => p[\"🏆 Categoria de la partida\"] === torneigCategoriaSeleccionada)\n      .filter(p => {\n        if (!filtre) return true;\n        const nom1 = (p[\"🎱 Nom del Jugador 1\"] || '').trim().toLowerCase();\n        const nom2 = (p[\"🎱 Nom del Jugador 2\"] || '').trim().toLowerCase();\n        return nom1.includes(filtre) || nom2.includes(filtre);\n      });\n\n    filtered.forEach((p, idx) => {\n      const nom1 = (p[\"🎱 Nom del Jugador 1\"] || '').trim();\n      const nom2 = (p[\"🎱 Nom del Jugador 2\"] || '').trim();\n      const car1 = parseInt(p[\"🔢 Caramboles del Jugador 1\"], 10) || 0;\n      const car2 = parseInt(p[\"🔢 Caramboles del Jugador 2\"], 10) || 0;\n      const entrades = p[\"⏱️ Entrades de la partida\"] || '';\n      const mitj1 = (parseFloat(p[\"Mitjana J1\"]) || 0).toFixed(3);\n      const mitj2 = (parseFloat(p[\"Mitjana J2\"]) || 0).toFixed(3);\n      const emoji1 = car1 > car2 ? ' 🏆' : '';\n      const emoji2 = car2 > car1 ? ' 🏆' : '';\n\n      const table = document.createElement('table');\n      table.className = 'partida';\n\n      const colgroup = document.createElement('colgroup');\n      ['jugadors', 'c', 'e', 'm'].forEach(cl => {\n        const col = document.createElement('col');\n        col.className = cl;\n        colgroup.appendChild(col);\n      });\n      table.appendChild(colgroup);\n\n      if (idx === 0) {\n        const thead = document.createElement('thead');\n        const headerRow = document.createElement('tr');\n        ['Jugadors', 'C', 'E', 'M'].forEach(text => {\n          const th = document.createElement('th');\n          th.textContent = text;\n          headerRow.appendChild(th);\n        });\n        thead.appendChild(headerRow);\n        table.appendChild(thead);\n      }\n\n      const tbody = document.createElement('tbody');\n      const tr1 = document.createElement('tr');\n      const tr2 = document.createElement('tr');\n\n      const tdNom1 = document.createElement('td');\n      tdNom1.textContent = `${nom1}${emoji1}`;\n      const tdCar1 = document.createElement('td');\n      tdCar1.textContent = car1;\n      const tdEntr = document.createElement('td');\n      tdEntr.textContent = entrades;\n      tdEntr.rowSpan = 2;\n      const tdMitj1 = document.createElement('td');\n      tdMitj1.textContent = mitj1;\n\n      tr1.appendChild(tdNom1);\n      tr1.appendChild(tdCar1);\n      tr1.appendChild(tdEntr);\n      tr1.appendChild(tdMitj1);\n\n      const tdNom2 = document.createElement('td');\n      tdNom2.textContent = `${nom2}${emoji2}`;\n      const tdCar2 = document.createElement('td');\n      tdCar2.textContent = car2;\n      const tdMitj2 = document.createElement('td');\n      tdMitj2.textContent = mitj2;\n\n      tr2.appendChild(tdNom2);\n      tr2.appendChild(tdCar2);\n      tr2.appendChild(tdMitj2);\n\n      tbody.appendChild(tr1);\n      tbody.appendChild(tr2);\n      table.appendChild(tbody);\n      appendResponsiveTable(list, table);\n    });\n  }\n\n  input.addEventListener('input', () => {\n    render(input.value.trim().toLowerCase());\n  });\n\n  render();\n}\n","import { mostraRanquing } from './ranking.js';\nimport { mostraClassificacio } from './classificacio.js';\nimport { mostraAgenda } from './agenda.js';\nimport { mostraHorari } from './horari.js';\nimport { mostraEnllacos } from './enllacos.js';\nimport { mostraContinu3B } from './continu3b.js';\nimport { mostraTorneig } from './torneig.js';\n\nconst uiSections = [\n  'filters-row',\n  'classificacio-filters',\n  'torneig-buttons',\n  'torneig-title',\n  'torneig-category-buttons',\n  'continu3b-buttons',\n  'content'\n];\n\nfunction hideAll() {\n  uiSections.forEach(id => {\n    const el = document.getElementById(id);\n    if (el) el.style.display = 'none';\n  });\n}\n\nfunction loadTorneig() {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n  fetch('data/modalitat.json')\n    .then(r => r.json())\n    .then(d => {\n      const title = document.getElementById('torneig-title');\n      const text = Array.isArray(d)\n        ? d.map(m => m.Modalitat).join(', ')\n        : (d.Modalitat || '');\n      title.textContent = `Social Modalitat ${text}`;\n      title.style.display = 'block';\n    })\n    .catch(() => {\n      document.getElementById('torneig-title').style.display = 'none';\n    });\n}\n\nconst routes = {\n  'btn-ranking': {\n    show: [{ id: 'filters-row', display: 'flex' }],\n    action: mostraRanquing\n  },\n  'btn-classificacio': {\n    show: [{ id: 'classificacio-filters', display: 'flex' }],\n    action: mostraClassificacio\n  },\n  'btn-agenda': { action: mostraAgenda },\n  'btn-horari': { action: mostraHorari },\n  'btn-enllacos': { action: mostraEnllacos },\n  'btn-continu3b': {\n    show: [{ id: 'continu3b-buttons', display: 'flex' }],\n    action: mostraContinu3B\n  },\n  'btn-torneig': {\n    show: [{ id: 'torneig-buttons', display: 'flex' }],\n    action: loadTorneig\n  }\n};\n\nfunction handleRoute(route) {\n  hideAll();\n  const content = document.getElementById('content');\n  content.style.display = 'block';\n  (route.show || []).forEach(({ id, display }) => {\n    const el = document.getElementById(id);\n    if (el) el.style.display = display;\n  });\n  if (route.action) route.action();\n}\n\nexport function setupRouter() {\n  document.getElementById('menu').addEventListener('click', e => {\n    if (e.target.classList.contains('menu-toggle')) {\n      const target = document.getElementById(e.target.dataset.target);\n      const isVisible = target.style.display === 'flex';\n      document.querySelectorAll('.submenu').forEach(sm => (sm.style.display = 'none'));\n      target.style.display = isVisible ? 'none' : 'flex';\n      hideAll();\n    }\n  });\n\n  document.getElementById('submenu-container').addEventListener('click', e => {\n    const route = routes[e.target.id];\n    if (route) {\n      handleRoute(route);\n    }\n  });\n\n  document.getElementById('torneig-buttons').addEventListener('click', e => {\n    if (e.target.tagName === 'BUTTON') {\n      const file = e.target.dataset.file;\n      fetch(`data/${file}`)\n        .then(r => r.json())\n        .then(d => mostraTorneig(d, file))\n        .catch(() => {\n          document.getElementById('content').innerHTML = '<p>Error carregant dades.</p>';\n        });\n    }\n  });\n}\n\n","import { events, agendaSetmanaInici, appendResponsiveTable } from './init.js';\n\nexport function mostraAgenda() {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n  const calContainer = document.createElement('div');\n  calContainer.id = 'calendar-container';\n  const nav = document.createElement('div');\n  nav.className = 'calendar-nav';\n  const prev = document.createElement('button');\n  prev.textContent = '<';\n  const next = document.createElement('button');\n  next.textContent = '>';\n  const label = document.createElement('span');\n  label.id = 'calendar-month';\n  prev.addEventListener('click', () => {\n    agendaSetmanaInici.setDate(agendaSetmanaInici.getDate() - 7);\n    render();\n  });\n  next.addEventListener('click', () => {\n    agendaSetmanaInici.setDate(agendaSetmanaInici.getDate() + 7);\n    render();\n  });\n  nav.appendChild(prev);\n  nav.appendChild(label);\n  nav.appendChild(next);\n  calContainer.appendChild(nav);\n  const calTable = document.createElement('table');\n  calTable.className = 'calendar-table';\n  const headRow = document.createElement('tr');\n  ['Dl', 'Dt', 'Dc', 'Dj', 'Dv', 'Ds', 'Dg'].forEach(d => {\n    const th = document.createElement('th');\n    th.textContent = d;\n    headRow.appendChild(th);\n  });\n  calTable.appendChild(headRow);\n  const calBody = document.createElement('tbody');\n  calTable.appendChild(calBody);\n  appendResponsiveTable(calContainer, calTable);\n  cont.appendChild(calContainer);\n  const listTable = document.createElement('table');\n  listTable.id = 'event-list';\n  listTable.classList.add('agenda-table');\n  appendResponsiveTable(cont, listTable);\n\n  const today = new Date();\n  let selectedDate = new Date(Date.UTC(today.getFullYear(), today.getMonth(), today.getDate()))\n    .toISOString()\n    .split('T')[0];\n\n  function renderCalendar() {\n    calBody.innerHTML = '';\n    const row = document.createElement('tr');\n    for (let i = 0; i < 7; i++) {\n      const cell = document.createElement('td');\n      const date = new Date(agendaSetmanaInici);\n      date.setDate(agendaSetmanaInici.getDate() + i);\n      const iso = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()))\n        .toISOString()\n        .split('T')[0];\n      cell.textContent = date.getDate();\n      cell.dataset.date = iso;\n      const dayEvents = events.filter(ev => ev['Data'] === iso);\n      if (dayEvents.length > 0) {\n        let cls = 'event-other';\n        if (dayEvents.some(ev => ev.Tipus === 'festiu')) {\n          cls = 'event-festiu';\n        } else if (dayEvents.some(ev => ev.Tipus === 'assemblea')) {\n          cls = 'event-assemblea';\n        } else if (dayEvents.some(ev => ev.Tipus === 'partida')) {\n          cls = 'event-partida';\n        } else if (dayEvents.some(ev => ev['Títol'].includes('Fi'))) {\n          cls = 'event-fi';\n        } else if (dayEvents.some(ev => ev['Títol'].includes('Inici'))) {\n          cls = 'event-inici';\n        }\n        cell.classList.add(cls);\n      }\n      if (iso === selectedDate) {\n        cell.classList.add('selected-day');\n      }\n      cell.addEventListener('click', () => {\n        selectedDate = iso;\n        render();\n      });\n      row.appendChild(cell);\n    }\n    calBody.appendChild(row);\n  }\n\n  function renderList() {\n    listTable.innerHTML = '';\n    const header = document.createElement('tr');\n    ['Data', 'Títol'].forEach(t => {\n      const th = document.createElement('th');\n      th.textContent = t;\n      header.appendChild(th);\n    });\n    listTable.appendChild(header);\n    const dayEvents = events\n      .filter(ev => ev['Data'] === selectedDate)\n      .sort((a, b) => (a['Hora'] || '').localeCompare(b['Hora'] || ''));\n    dayEvents.forEach(ev => {\n      const tr = document.createElement('tr');\n      tr.dataset.date = ev['Data'];\n      let cls = 'event-other';\n      if (ev.Tipus === 'festiu') {\n        cls = 'event-festiu';\n      } else if (ev.Tipus === 'assemblea') {\n        cls = 'event-assemblea';\n      } else if (ev.Tipus === 'partida') {\n        cls = 'event-partida';\n      } else if (ev['Títol'].includes('Fi')) {\n        cls = 'event-fi';\n      } else if (ev['Títol'].includes('Inici')) {\n        cls = 'event-inici';\n      }\n      tr.classList.add(cls);\n      ['Data', 'Títol'].forEach(clau => {\n        const td = document.createElement('td');\n        if (clau === 'Data') {\n          const [y, m, d] = (ev['Data'] || '').split('-');\n          td.textContent = `${d}/${m}`;\n        } else {\n          td.textContent = ev[clau] || '';\n        }\n        tr.appendChild(td);\n      });\n      listTable.appendChild(tr);\n    });\n  }\n\n  function render() {\n    const end = new Date(agendaSetmanaInici);\n    end.setDate(agendaSetmanaInici.getDate() + 6);\n    const weekEnd = new Date(agendaSetmanaInici);\n    weekEnd.setDate(agendaSetmanaInici.getDate() + 7);\n    if (new Date(selectedDate) < agendaSetmanaInici || new Date(selectedDate) >= weekEnd) {\n      selectedDate = agendaSetmanaInici.toISOString().split('T')[0];\n    }\n    const startStr = agendaSetmanaInici.toLocaleDateString('ca-ES', { day: 'numeric', month: 'short' });\n    const endStr = end.toLocaleDateString('ca-ES', { day: 'numeric', month: 'short', year: 'numeric' });\n    label.textContent = `${startStr} - ${endStr}`;\n    renderCalendar();\n    renderList();\n  }\n\n  render();\n}\n","export function mostraHorari() {\n  const cont = document.getElementById('content');\n  cont.innerHTML = `\n<div class=\"normes-container\">\n  <h2 class=\"normes-title\">Normes d’ús i horari</h2>\n\n  <!-- Horari -->\n  <div class=\"normes-card horari\">\n    <h3>🕒 Horari d'obertura de la Secció</h3>\n    <ul>\n      <li><b>Dilluns, dimecres, dijous, dissabte i diumenge:</b> 9:00 – 21:30</li>\n      <li><b>Dimarts i divendres:</b> 10:30 – 21:30</li>\n      <li>L'horari d'obertura pot canviar en funció dels horaris d'obertura del <b>Bar del Foment</b>.</li>\n      <li>L'horari d'atenció al públic del <b>FOMENT</b> és de <b>DILLUNS A DIVENDRES</b> de <b>9:00 A 13:00</b> i de <b>16:00 A 20:00</b>.</li>\n      <li>Les seccions poden tenir activitat fora d'aquest horari si el bar està obert, excepte <b>AGOST</b> i <b>FESTIUS</b>, quan el <b>FOMENT</b> resta oficialment tancat.</li>\n      <li>La secció romandrà tancada els dies de <b>TANCAMENT OFICIAL</b> del <b>FOMENT</b>.</li>\n\n    </ul>\n  </div>\n\n  <!-- Norma Obligatòria -->\n  <div class=\"normes-card obligatori\">\n    <h3>🚨 OBLIGATORI</h3>\n    <p class=\"obligatori-text\">\n      Netejar el billar i les boles abans de començar cada partida amb el material que la Secció posa a disposició de tots els socis.\n    </p>\n  </div>\n\n  <!-- Prohibicions -->\n  <div class=\"normes-card prohibit\">\n\n    <h3>🚫 PROHIBIT</h3>\n\n    <ul>\n      <li>Jugar a fantasia.</li>\n      <li>Menjar mentre s'està jugant.</li>\n      <li>Posar begudes sobre cap element del billar.</li>\n    </ul>\n  </div>\n\n  <!-- Inscripció -->\n  <div class=\"normes-card\">\n    <h3>📝 Inscripció a les partides</h3>\n    <ul>\n      <li>Apunta’t a la pissarra única de <b>PARTIDES SOCIALS</b>.</li>\n      <li>Els companys no cal que s’apuntin; si ho fan, que sigui al costat del primer jugador.</li>\n    </ul>\n  </div>\n\n  <!-- Assignació de taula -->\n  <div class=\"normes-card\">\n    <h3>🗂 Assignació de taula</h3>\n    <ul>\n      <li>Quan hi hagi una taula lliure, ratlla el teu nom i juga.</li>\n      <li>Si vols una taula concreta ocupada, <b>passa el torn</b> fins que s’alliberi.</li>\n    </ul>\n  </div>\n\n  <!-- Temps de joc -->\n  <div class=\"normes-card\">\n    <h3>⏳ Temps de joc</h3>\n    <ul>\n      <li>Màxim <b>1 hora</b> per partida (sol o en grup).</li>\n      <li><b>PROHIBIT</b> posar monedes per allargar el temps, encara que hi hagi taules lliures.</li>\n    </ul>\n  </div>\n\n  <!-- Tornar a jugar -->\n  <div class=\"normes-card\">\n    <h3>🔄 Tornar a jugar</h3>\n    <ul>\n      <li>Només pots repetir si <b>no hi ha ningú apuntat</b> i hi ha una taula lliure.</li>\n    </ul>\n  </div>\n</div>\n  `;\n}\n","export function mostraEnllacos() {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n  fetch('data/enllacos.json')\n    .then(r => r.json())\n    .then(d => {\n      const tipusMap = {};\n      d.forEach(item => {\n        const tipus = item.Tipus || 'Altres';\n        if (!tipusMap[tipus]) tipusMap[tipus] = [];\n        tipusMap[tipus].push(item);\n      });\n\n      Object.entries(tipusMap).forEach(([tipus, items]) => {\n        const tipusDetails = document.createElement('details');\n        const tipusSummary = document.createElement('summary');\n        tipusSummary.textContent = tipus;\n        tipusSummary.classList.add('enllac-tipus');\n        tipusDetails.appendChild(tipusSummary);\n\n        items.forEach(ci => {\n          const url = ci.URL || ci.Url || ci.url;\n          if (url) {\n            const ul = tipusDetails.querySelector('ul') || document.createElement('ul');\n            const li = document.createElement('li');\n            const a = document.createElement('a');\n            a.href = url;\n            a.target = '_blank';\n            a.rel = 'noopener';\n            let text =\n              ci.Títol ||\n              ci.Titol ||\n              ci.Nom ||\n              ci.Name ||\n              ci.Text ||\n              url;\n            if (ci.Billar) text += ` - Billar ${ci.Billar}`;\n            a.textContent = text;\n            li.appendChild(a);\n            ul.appendChild(li);\n            tipusDetails.appendChild(ul);\n          }\n        });\n\n        cont.appendChild(tipusDetails);\n      });\n    })\n    .catch(err => {\n      cont.textContent = \"No s'han pogut carregar els enllaços.\";\n      console.error('Error loading links', err);\n    });\n}\n","import { appendResponsiveTable } from \"./init.js\";\n\nexport function mostraContinu3B() {\n  const cont = document.getElementById('content');\n  cont.innerHTML = '';\n\n  const btnContainer = document.getElementById('continu3b-buttons');\n  btnContainer.innerHTML = '';\n\n\n  Promise.all([\n    fetch('data/continu3b_rankingactiu.json').then(r => r.json()).catch(() => []),\n    fetch('data/continu3b_llistaespera.json').then(r => r.json()).catch(() => []),\n    fetch('data/continu3b_reptes.json').then(r => r.json()).catch(() => []),\n    fetch('data/continu3b_partides.json').then(r => r.json()).catch(() => []),\n    fetch('data/continu3b_jugadors.json').then(r => r.json()).catch(() => []),\n    fetch('data/continu3b_parametres.json').then(r => r.json()).catch(() => [])\n  ])\n    .then(([ranking, llista, reptes, partides, jugadors, parametres]) => {\n\n      const mapJugadors = Object.fromEntries(jugadors.map(j => [j.id, j.nom]));\n\n      const cooldownReptar =\n        parseInt(\n          (parametres.find(p => p.clau === 'COOLDOWN_REPTAR_DIES') || {})\n            .valor,\n          10\n        ) || 7;\n\n\n      const calculaInactivitat = dataStr => {\n        if (!dataStr) return { dies: null, data: '' };\n        const [d, m, y] = dataStr.split('/');\n        const parsed = new Date(`${y}-${m}-${d}T00:00:00`);\n        if (isNaN(parsed)) return { dies: null, data: '' };\n        const dies = Math.floor(\n          (Date.now() - parsed.getTime()) / (1000 * 60 * 60 * 24)\n        );\n        return { dies, data: `${d}/${m}/${y}` };\n      };\n\n      const disponible = (id, diesInactiu, posicio, repteActiu) => {\n        if (parseInt(posicio, 10) === 1) return false;\n        if (repteActiu) {\n          if (!repteActiu.data_programa) {\n            let limit = 0;\n            let base = '';\n            if (repteActiu.estat === 'proposat') {\n              limit = 14;\n              base = repteActiu.created_at;\n            } else if (repteActiu.estat === 'acceptat') {\n              limit = 7;\n              base = repteActiu.data_acceptacio || repteActiu.created_at;\n            }\n            if (limit) {\n              const diff = Math.floor(\n                (Date.now() - new Date(base).getTime()) /\n                  (1000 * 60 * 60 * 24)\n              );\n              if (diff < limit) return false;\n            } else {\n              return false;\n            }\n          } else {\n            return false;\n          }\n        }\n        if (diesInactiu == null) return true;\n        return diesInactiu >= cooldownReptar;\n\n      };\n\n      function mostraPartidesJugador(id, nom) {\n        cont.innerHTML = '';\n        const title = document.createElement('h3');\n        title.textContent = `Partides de ${nom}`;\n        cont.appendChild(title);\n        const partJug = partides.filter(\n          p => p.local_id === id || p.visitant_id === id\n        );\n        if (partJug.length) {\n          const table = document.createElement('table');\n          const thead = document.createElement('thead');\n          const headerRow = document.createElement('tr');\n          ['Data', 'Rival', 'Resultat'].forEach(h => {\n            const th = document.createElement('th');\n            th.textContent = h;\n            headerRow.appendChild(th);\n          });\n          thead.appendChild(headerRow);\n          table.appendChild(thead);\n          const tbody = document.createElement('tbody');\n          partJug.forEach(p => {\n            const tr = document.createElement('tr');\n            const data = p.data\n              ? new Date(p.data).toLocaleDateString('ca-ES')\n              : '';\n            const esLocal = p.local_id === id;\n            const rivalId = esLocal ? p.visitant_id : p.local_id;\n            const rival = mapJugadors[rivalId] || rivalId;\n            const resultat =\n              p.caramboles_local && p.caramboles_visitant\n                ? esLocal\n                  ? `${p.caramboles_local}-${p.caramboles_visitant}`\n                  : `${p.caramboles_visitant}-${p.caramboles_local}`\n                : '';\n            [data, rival, resultat].forEach(t => {\n              const td = document.createElement('td');\n              td.textContent = t;\n              tr.appendChild(td);\n            });\n            tbody.appendChild(tr);\n          });\n          table.appendChild(tbody);\n          appendResponsiveTable(cont, table);\n        } else {\n          const p = document.createElement('p');\n          p.textContent = 'No hi ha partides per aquest jugador.';\n          cont.appendChild(p);\n        }\n        const backBtn = document.createElement('button');\n        backBtn.textContent = 'Torna';\n        backBtn.addEventListener('click', () => btnRanking.click());\n        cont.appendChild(backBtn);\n      }\n\n      const showSection = (btn, render) => {\n        btnContainer.querySelectorAll('button').forEach(b =>\n          b.classList.remove('selected')\n        );\n        btn.classList.add('selected');\n        cont.innerHTML = '';\n        render();\n      };\n\n      const filterLabel = document.createElement('label');\n      filterLabel.id = 'ranking-filter-disponibles';\n      const chkDisponibles = document.createElement('input');\n      chkDisponibles.type = 'checkbox';\n      filterLabel.appendChild(chkDisponibles);\n      filterLabel.appendChild(\n        document.createTextNode(' Mostra només disponibles')\n      );\n\n      const btnRanking = document.createElement('button');\n      btnRanking.textContent = 'Rànquing actual';\n      chkDisponibles.addEventListener('change', () => btnRanking.click());\n      btnRanking.addEventListener('click', () =>\n        showSection(btnRanking, () => {\n          const title = document.createElement('h3');\n          title.textContent = 'Rànquing actual';\n          cont.appendChild(title);\n          if (Array.isArray(ranking) && ranking.length) {\n            const table = document.createElement('table');\n            table.classList.add('ranking-table');\n            const thead = document.createElement('thead');\n            const headerRow = document.createElement('tr');\n\n            [\n              'Posició',\n              'Jugador',\n              'Dies per reptar/ser reptat',\n              'Disponible'\n            ].forEach(h => {\n              const th = document.createElement('th');\n              th.textContent = h;\n              headerRow.appendChild(th);\n            });\n            thead.appendChild(headerRow);\n            table.appendChild(thead);\n\n            const tbody = document.createElement('tbody');\n            const ordered = ranking\n              .slice()\n              .sort((a, b) => parseInt(a.posicio) - parseInt(b.posicio));\n            ordered.forEach(r => {\n                const info = jugadors.find(j => j.id === r.jugador_id);\n                const { dies: diesInactiu, data: dataUltim } = calculaInactivitat(\n                  info ? info.data_ultim_repte : ''\n                );\n                const repteActiu = reptes.find(\n                  rp =>\n                    (rp.reptador_id === r.jugador_id || rp.reptat_id === r.jugador_id) &&\n                    ['proposat', 'acceptat', 'programat'].includes(rp.estat)\n                );\n                const pot = disponible(\n                  r.jugador_id,\n                  diesInactiu,\n                  r.posicio,\n                  repteActiu\n                );\n                if (chkDisponibles.checked && !pot) return;\n\n                const tr = document.createElement('tr');\n\n                const posTd = document.createElement('td');\n                posTd.textContent = r.posicio;\n                tr.appendChild(posTd);\n\n                const nom = mapJugadors[r.jugador_id] || r.jugador_id;\n                const nameBtn = document.createElement('button');\n                nameBtn.textContent = nom;\n                nameBtn.addEventListener('click', () =>\n                  mostraPartidesJugador(r.jugador_id, nom)\n                );\n                const nomTd = document.createElement('td');\n                nomTd.appendChild(nameBtn);\n                tr.appendChild(nomTd);\n\n                const diesTd = document.createElement('td');\n                let diesRestants = 0;\n                if (repteActiu && !repteActiu.data_programa) {\n                  let limit = 0;\n                  let base = '';\n                  if (repteActiu.estat === 'proposat') {\n                    limit = 7;\n                    base = repteActiu.created_at;\n                  } else if (repteActiu.estat === 'acceptat') {\n                    limit = 7;\n                    base = repteActiu.data_acceptacio || repteActiu.created_at;\n                  }\n                  if (limit) {\n                    const diff = Math.floor(\n                      (Date.now() - new Date(base).getTime()) /\n                        (1000 * 60 * 60 * 24)\n                    );\n                    diesRestants = Math.max(limit - diff, 0);\n                  }\n                } else if (diesInactiu != null) {\n\n                  diesRestants = Math.max(cooldownReptar - diesInactiu, 0);\n                  if (dataUltim) diesTd.title = `Últim repte: ${dataUltim}`;\n                }\n                diesTd.textContent = `${diesRestants} dies`;\n                tr.appendChild(diesTd);\n\n                const potSpan = document.createElement('span');\n                potSpan.textContent = pot ? '🟢' : '🔴';\n                potSpan.title = pot\n                  ? 'Pot reptar i ser reptat'\n                  : 'No pot reptar ni ser reptat';\n                const potTd = document.createElement('td');\n                potTd.appendChild(potSpan);\n                tr.appendChild(potTd);\n\n                tbody.appendChild(tr);\n              });\n            table.appendChild(tbody);\n            const legenda = document.createElement('div');\n\n            ['🟢 Pot reptar i ser reptat', '🔴 No pot reptar ni ser reptat'].forEach(\n              t => {\n                const p = document.createElement('p');\n                p.textContent = t;\n                legenda.appendChild(p);\n              }\n            );\n\n            cont.appendChild(legenda);\n            cont.appendChild(filterLabel);\n            appendResponsiveTable(cont, table);\n          } else {\n\n            const p = document.createElement('p');\n            p.textContent = 'No hi ha rànquing disponible.';\n            cont.appendChild(p);\n          }\n        })\n      );\n\n      const btnReptes = document.createElement('button');\n      btnReptes.textContent = 'Reptes';\n      btnReptes.addEventListener('click', () =>\n        showSection(btnReptes, () => {\n          const reptesPendents = reptes.filter(\n            r => r.estat === 'proposat' && r.tipus !== 'acces'\n          );\n          const reptesAcceptats = reptes.filter(\n            r => r.estat === 'acceptat' && r.tipus !== 'acces'\n          );\n          const reptesProgramats = reptes.filter(\n            r => r.estat === 'programat' && r.tipus !== 'acces'\n          );\n          const reptesTancats = reptes.filter(\n            r => r.estat === 'tancat' && r.tipus !== 'acces'\n          );\n\n          const title = document.createElement('h3');\n          title.textContent = 'Reptes';\n          cont.appendChild(title);\n\n\n          const drawCards = (list, infoFn, container = cont) => {\n\n            list.forEach(r => {\n              const card = document.createElement('div');\n              card.classList.add('repte-card');\n              const reptador = mapJugadors[r.reptador_id] || r.reptador_id;\n              const reptat = mapJugadors[r.reptat_id] || r.reptat_id;\n              const h4 = document.createElement('h4');\n              h4.textContent = `${reptador} vs ${reptat}`;\n              card.appendChild(h4);\n\n              const info = infoFn(r);\n\n              info.forEach(([label, date]) => {\n                if (date) {\n                  const p = document.createElement('p');\n                  p.textContent = `${label}: ${new Date(date).toLocaleDateString('ca-ES')}`;\n                  card.appendChild(p);\n                }\n              });\n\n              container.appendChild(card);\n            });\n          };\n\n          const section = (t, list, infoFn, emptyMsg) => {\n            const st = document.createElement('h4');\n            st.textContent = t;\n            cont.appendChild(st);\n            if (list.length) {\n              drawCards(list, infoFn);\n            } else {\n              const p = document.createElement('p');\n              p.textContent = emptyMsg;\n              cont.appendChild(p);\n            }\n          };\n\n          const calcLimit = base =>\n            base\n              ? new Date(new Date(base).getTime() + 7 * 24 * 60 * 60 * 1000)\n              : null;\n\n          const infoPendents = r => {\n            const limitAcceptar = calcLimit(r.created_at);\n            const limitJugar = calcLimit(limitAcceptar);\n            return [\n              ['Creació', r.created_at],\n              ['Límit acceptar', limitAcceptar],\n              ['Límit jugar', limitJugar]\n            ];\n          };\n\n\n          const infoAcceptats = r => [\n            ['Creació', r.created_at],\n            ['Acceptació', r.data_acceptacio],\n            ['Límit jugar', calcLimit(r.data_acceptacio || r.created_at)]\n          ];\n\n          const infoProgramats = r => [\n            ['Creació', r.created_at],\n            ['Acceptació', r.data_acceptacio],\n            ['Programació', r.data_programa],\n            ['Límit jugar', calcLimit(r.data_acceptacio || r.created_at)]\n          ];\n\n          const mapPartides = Object.fromEntries(partides.map(p => [p.id, p]));\n\n          const infoTancats = r => {\n            const partida = mapPartides[r.partida_id] || {};\n            return [\n              ['Creació', r.created_at],\n              ['Acceptació', r.data_acceptacio],\n              ['Programació', r.data_programa],\n              ['Jugat', partida.data]\n            ];\n\n          };\n\n          section(\n            'Pendents d’acceptar',\n            reptesPendents,\n\n            infoPendents,\n\n            'No hi ha reptes pendents.'\n          );\n          section(\n            'Acceptats',\n            reptesAcceptats,\n\n            infoAcceptats,\n\n            'No hi ha reptes acceptats.'\n          );\n          section(\n            'Programats',\n            reptesProgramats,\n\n            infoProgramats,\n            'No hi ha reptes programats.'\n          );\n\n          const detTancats = document.createElement('details');\n          detTancats.id = 'reptes-tancats';\n          const sumTancats = document.createElement('summary');\n          sumTancats.textContent = 'Tancats';\n          detTancats.appendChild(sumTancats);\n          if (reptesTancats.length) {\n            drawCards(reptesTancats, infoTancats, detTancats);\n          } else {\n            const p = document.createElement('p');\n            p.textContent = 'No hi ha reptes tancats.';\n            detTancats.appendChild(p);\n          }\n          cont.appendChild(detTancats);\n\n        })\n      );\n\n      const btnLlista = document.createElement('button');\n      btnLlista.textContent = \"Llista d'espera\";\n      btnLlista.addEventListener('click', () =>\n        showSection(btnLlista, () => {\n          const title = document.createElement('h3');\n          title.textContent = \"Llista d'espera\";\n          cont.appendChild(title);\n          if (Array.isArray(llista) && llista.length) {\n            const table = document.createElement('table');\n            table.classList.add('ranking-table');\n            const thead = document.createElement('thead');\n            const headerRow = document.createElement('tr');\n            ['Posició', 'Jugador', 'Pot reptar'].forEach(h => {\n              const th = document.createElement('th');\n              th.textContent = h;\n              headerRow.appendChild(th);\n            });\n            thead.appendChild(headerRow);\n            table.appendChild(thead);\n\n            const tbody = document.createElement('tbody');\n            const ordered = llista\n              .slice()\n              .sort((a, b) => parseInt(a.ordre, 10) - parseInt(b.ordre, 10));\n            ordered.forEach((l, idx) => {\n              const tr = document.createElement('tr');\n\n              const posTd = document.createElement('td');\n              posTd.textContent = l.ordre;\n              tr.appendChild(posTd);\n\n              const nom = mapJugadors[l.jugador_id] || l.jugador_id;\n              const nameBtn = document.createElement('button');\n              nameBtn.textContent = nom;\n              nameBtn.addEventListener('click', () =>\n                mostraEvolucioJugador(l.jugador_id, nom)\n              );\n              const nomTd = document.createElement('td');\n              nomTd.appendChild(nameBtn);\n              tr.appendChild(nomTd);\n\n              const potTd = document.createElement('td');\n              const potSpan = document.createElement('span');\n              const pot = idx === 0;\n              potSpan.textContent = pot ? '🟢' : '🔴';\n              potSpan.title = pot\n                ? 'Pot reptar el jugador 20'\n                : 'No pot reptar';\n              potTd.appendChild(potSpan);\n              tr.appendChild(potTd);\n\n              tbody.appendChild(tr);\n            });\n            table.appendChild(tbody);\n\n            const legenda = document.createElement('div');\n            ['🟢 Pot reptar', '🔴 No pot reptar'].forEach(t => {\n              const p = document.createElement('p');\n              p.textContent = t;\n              legenda.appendChild(p);\n            });\n            cont.appendChild(legenda);\n            appendResponsiveTable(cont, table);\n          } else {\n            const p = document.createElement('p');\n            p.textContent = \"No hi ha jugadors en llista d'espera.\";\n            cont.appendChild(p);\n          }\n        })\n      );\n\n      const btnAcces = document.createElement('button');\n      btnAcces.textContent = 'Reptes accés';\n      btnAcces.addEventListener('click', () =>\n        showSection(btnAcces, () => {\n          const title = document.createElement('h3');\n          title.textContent = 'Reptes accés';\n          cont.appendChild(title);\n\n          const reptesAcces = reptes.filter(\n            r => r.estat !== 'tancat' && r.tipus === 'acces'\n          );\n          const subRepTitle = document.createElement('h4');\n          subRepTitle.textContent = 'Reptes';\n          cont.appendChild(subRepTitle);\n          if (reptesAcces.length) {\n            const table = document.createElement('table');\n            const thead = document.createElement('thead');\n            const headerRow = document.createElement('tr');\n            ['Reptador', 'Reptat', 'Creació', 'Acceptació', 'Programació', 'Límit'].forEach(\n              h => {\n                const th = document.createElement('th');\n                th.textContent = h;\n                headerRow.appendChild(th);\n              }\n            );\n            thead.appendChild(headerRow);\n            table.appendChild(thead);\n            const tbody = document.createElement('tbody');\n            reptesAcces.forEach(r => {\n              const tr = document.createElement('tr');\n              const reptador = mapJugadors[r.reptador_id] || r.reptador_id;\n              const reptat = mapJugadors[r.reptat_id] || r.reptat_id;\n              const created = r.created_at\n                ? new Date(r.created_at).toLocaleDateString('ca-ES')\n                : '';\n              const accept = r.data_acceptacio\n                ? new Date(r.data_acceptacio).toLocaleDateString('ca-ES')\n                : '';\n              const program = r.data_programa\n                ? new Date(r.data_programa).toLocaleDateString('ca-ES')\n                : '';\n              const deadline = r.deadline_jugar\n                ? new Date(r.deadline_jugar).toLocaleDateString('ca-ES')\n                : '';\n              [reptador, reptat, created, accept, program, deadline].forEach(t => {\n                const td = document.createElement('td');\n                td.textContent = t;\n                tr.appendChild(td);\n              });\n              tbody.appendChild(tr);\n            });\n            table.appendChild(tbody);\n            appendResponsiveTable(cont, table);\n          } else {\n            const p = document.createElement('p');\n            p.textContent = 'No hi ha reptes d\\'accés pendents.';\n            cont.appendChild(p);\n          }\n\n        })\n      );\n\n      const btnPartides = document.createElement('button');\n      btnPartides.textContent = 'Partides';\n      btnPartides.addEventListener('click', () =>\n        showSection(btnPartides, () => {\n          const title = document.createElement('h3');\n          title.textContent = 'Partides';\n          cont.appendChild(title);\n          if (Array.isArray(partides) && partides.length) {\n            const rankingMap = Object.fromEntries(\n              ranking.map(r => [r.jugador_id, parseInt(r.posicio, 10)])\n            );\n            const sorted = partides\n              .slice()\n              .sort((a, b) => new Date(b.data) - new Date(a.data));\n            sorted.forEach(p => {\n              const card = document.createElement('div');\n              card.classList.add('partida-card');\n              const repte = reptes.find(r => r.id === p.repte_id) || {};\n              const local = mapJugadors[p.local_id] || p.local_id;\n              const visitant = mapJugadors[p.visitant_id] || p.visitant_id;\n              const resultat =\n                p.caramboles_local && p.caramboles_visitant\n                  ? `${p.caramboles_local}-${p.caramboles_visitant}`\n                  : '';\n              const posLocalAfter = rankingMap[p.local_id];\n              const posVisitantAfter = rankingMap[p.visitant_id];\n              const swap = repte.resultat_guanya_reptador === 'TRUE';\n              let posLocalInicial = posLocalAfter;\n              let posVisitantInicial = posVisitantAfter;\n              if (swap && posLocalAfter !== undefined && posVisitantAfter !== undefined) {\n                posLocalInicial = posVisitantAfter;\n                posVisitantInicial = posLocalAfter;\n              }\n              const posLocalText =\n                posLocalInicial !== undefined ? posLocalInicial : '-';\n              const posVisitantText =\n                posVisitantInicial !== undefined ? posVisitantInicial : '-';\n              const swapText = swap\n                ? 'Intercanvi de posicions'\n                : 'No intercanvi de posicions';\n              const date = p.data\n                ? new Date(p.data).toLocaleDateString('ca-ES')\n                : '';\n              card.innerHTML = `\n                <h4>${date}</h4>\n                <p>${local} (Pos. ${posLocalText}) vs ${visitant} (Pos. ${posVisitantText})</p>\n                <p>Resultat: ${resultat}</p>\n                <p>${swapText}</p>\n              `;\n              cont.appendChild(card);\n            });\n          } else {\n            const p = document.createElement('p');\n            p.textContent = 'No hi ha partides registrades.';\n            cont.appendChild(p);\n          }\n        })\n      );\n\n      const btnNormativa = document.createElement('button');\n      btnNormativa.textContent = 'Normativa';\n      btnNormativa.addEventListener('click', () =>\n        showSection(btnNormativa, () => {\n\n          cont.innerHTML = `\n<div class=\"normes-container\">\n  <h2 class=\"normes-title\">Normativa Continu 3B</h2>\n\n  <div class=\"normes-card\">\n    <h3>📊 Rànquing actiu</h3>\n    <ul>\n      <li><strong>Màxim 20 jugadors</strong>, actualitzat contínuament mitjançant reptes directes</li>\n      <li>Els jugadors que vulguin formar part del rànquing un cop s'arribi al màxim de 20 jugadors formaran part de la <strong>llista d'espera</strong>.</li>\n    </ul>\n  </div>\n\n  <div class=\"normes-card\">\n    <h3>⚔️ Reptes normals</h3>\n    <ul>\n      <li>Pots reptar fins a <strong>2 posicions</strong> per sobre teu.</li>\n      <li><strong>Màxim un repte actiu</strong> per jugador.</li>\n      <li><strong>Mínim 7 dies</strong> entre reptes.</li>\n      <li>Si guanya el reptador → <strong>intercanvi de posicions</strong>.</li>\n      <li>Si perd el reptador → <strong>no hi ha canvis</strong>.</li>\n    </ul>\n  </div>\n\n  <div class=\"normes-card\">\n    <h3>🚪 Reptes d’accés</h3>\n    <ul>\n      <li><strong>Primer de la llista d’espera</strong> pot reptar el jugador 20.</li>\n      <li>Si guanya → <strong>entra al rànquing</strong> (pos. 20) i el perdedor passa a la llista d’espera.</li>\n      <li>Si perd → passa al final de la <strong>llista d’espera</strong>.</li>\n    </ul>\n  </div>\n\n  <div class=\"normes-card\">\n    <h3>⏱️ Terminis</h3>\n    <p><strong>7 dies</strong> per acceptar un repte i <strong>7 dies</strong> per jugar-lo un cop acceptat.</p>\n  </div>\n\n  <div class=\"normes-card\">\n    <h3>⚠️ Penalitzacions</h3>\n    <ul>\n      <li>Incompareixença o refús sense motiu → <strong>derrota automàtica</strong>.</li>\n      <li>Sense acord de data → tots dos <strong>perden una posició</strong>.</li>\n    </ul>\n  </div>\n\n  <div class=\"normes-card\">\n    <h3>😴 Inactivitat</h3>\n    <ul>\n      <li><strong>3 setmanes</strong> sense reptes → baixa 5 posicions (pre-inactiu).</li>\n      <li><strong>6 setmanes</strong> sense reptes → surt del rànquing i entra el primer de la llista d’espera.</li>\n    </ul>\n  </div>\n\n  <div class=\"normes-card\">\n    <p>Consulta la <a href=\"https://docs.google.com/document/d/165_bh9m0WxRU_LoTt_k8aiJseZZn9bBZ/edit?usp=sharing&amp;ouid=102336298592739127647&amp;rtpof=true&amp;sd=true\" target=\"_blank\" rel=\"noopener\"><strong>normativa completa</strong></a>.</p>\n  </div>\n</div>`;\n        })\n      );\n\n      [btnRanking, btnReptes, btnLlista, btnAcces, btnPartides, btnNormativa].forEach(b =>\n        btnContainer.appendChild(b)\n      );\n\n      btnRanking.click();\n    })\n    .catch(err => {\n      console.error('Error carregant dades continu 3B', err);\n      cont.innerHTML = '<p>Error carregant dades.</p>';\n    });\n}\n","export function setupServiceWorker() {\n  if ('serviceWorker' in navigator) {\n    window.addEventListener('load', () => {\n      navigator.serviceWorker.register('./service-worker.js')\n        .then(reg => {\n          console.log('SW registrat!', reg);\n          const checkForUpdate = () => {\n            reg.update().then(() => {\n              if (reg.waiting) {\n                reg.waiting.postMessage({ type: 'SKIP_WAITING' });\n              }\n            });\n          };\n\n          checkForUpdate();\n          setInterval(checkForUpdate, 24 * 60 * 60 * 1000);\n        })\n        .catch(err => console.error('Error al registrar el SW:', err));\n\n      let refreshing = false;\n      navigator.serviceWorker.addEventListener('controllerchange', () => {\n        if (refreshing) return;\n        window.location.reload();\n        refreshing = true;\n      });\n    });\n  }\n\n  document.getElementById('btn-update').addEventListener('click', () => {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.getRegistration().then(reg => {\n        if (reg) {\n          reg.update().then(() => {\n            if (reg.waiting) {\n              reg.waiting.postMessage({ type: 'SKIP_WAITING' });\n            }\n          });\n        }\n      });\n    }\n  });\n}\n","import { setupServiceWorker } from './js/sw-register.js';\nimport { inicialitza } from './js/init.js';\nimport { setupRouter } from './js/router.js';\nimport { closeChart, handleResize } from './js/graficos.js';\n\nsetupServiceWorker();\nsetupRouter();\n\ndocument.getElementById('close-chart').addEventListener('click', closeChart);\nwindow.addEventListener('resize', handleResize);\n\ninicialitza();\n"],"names":["lastFocusedElement","mostraEvolucioJugador","jugador","nom","modalitats","dadesPerMod","map","mod","ranquing","filter","r","Jugador","Modalitat","any","parseInt","Any","mitjana","parseFloat","Mitjana","sort","a","b","anys","Set","flat","d","colors","datasets","idx","label","data","y","reg","find","Number","borderColor","backgroundColor","tension","fill","canvas","document","getElementById","overlay","style","display","activeElement","closeBtn","focus","adjustChartSize","title","textContent","ctx","getContext","lineChart","destroy","setLineChart","Chart","type","labels","options","plugins","legend","position","scales","x","text","ticks","stepSize","autoSkip","suggestedMin","all","flatMap","v","min","length","Math","floor","suggestedMax","max","ceil","beginAtZero","responsive","maintainAspectRatio","mostraRanquing","cont","innerHTML","taula","createElement","cap","forEach","t","th","appendChild","anySeleccionat","modalitatSeleccionada","tr","clau","td","valor","toFixed","NomComplet","classList","add","addEventListener","e","stopPropagation","appendResponsiveTable","mostraClassificacio","classificacions","classAnySeleccionat","classModalitatSeleccionada","Categoria","classCategoriaSeleccionada","num","isNaN","classYears","events","agendaSetmanaInici","Date","setHours","setDate","getDate","getDay","torneigCaramboles","torneigCategoriaSeleccionada","chart","container","table","wrapper","className","chartContainer","width","height","resize","preparaTorneigCategories","categories","render","includes","cat","btn","querySelectorAll","remove","mostraTorneig","dades","file","catCont","partides","Array","isArray","programades","p","Data","pendents","dataDiff","localeCompare","horaDiff","Hora","Billar","match","filters","id","input","placeholder","dataContainer","mesos","filtre","toLowerCase","progFiltrades","j1","trim","j2","dayCounts","reduce","acc","lastData","tdDia","yyyy","mm","dd","split","diaNum","diaTxt","count","rowSpan","billar","replace","hora","test","val","pendFiltrades","Jornada","h3","taulaPend","capPend","value","mostraCalendari","dateA","Timestamp","list","nom1","nom2","car1","car2","entrades","mitj1","mitj2","emoji1","emoji2","colgroup","cl","col","thead","headerRow","tbody","tr1","tr2","tdNom1","tdCar1","tdEntr","tdMitj1","tdNom2","tdCar2","tdMitj2","mostraPartides","catField","nomField","agrupats","push","Object","keys","car","ul","li","puntsA","puntsB","mitjanaA","headers","h","slice","row","_","obj","pre","JSON","stringify","uiSections","hideAll","el","routes","show","action","calContainer","nav","prev","next","calTable","headRow","calBody","listTable","today","selectedDate","UTC","getFullYear","getMonth","toISOString","end","weekEnd","startStr","toLocaleDateString","day","month","endStr","year","i","cell","date","iso","dataset","dayEvents","ev","cls","some","Tipus","renderCalendar","header","m","renderList","fetch","then","json","tipusMap","item","tipus","entries","items","tipusDetails","tipusSummary","ci","url","URL","Url","querySelector","href","target","rel","Titol","Nom","Name","Text","catch","err","console","error","btnContainer","Promise","ranking","llista","reptes","jugadors","parametres","mapJugadors","fromEntries","j","cooldownReptar","showSection","filterLabel","chkDisponibles","createTextNode","btnRanking","click","posicio","info","jugador_id","dies","diesInactiu","dataUltim","dataStr","parsed","now","getTime","calculaInactivitat","data_ultim_repte","repteActiu","rp","reptador_id","reptat_id","estat","pot","data_programa","limit","base","created_at","data_acceptacio","disponible","checked","posTd","nameBtn","partJug","local_id","visitant_id","esLocal","rivalId","caramboles_local","caramboles_visitant","backBtn","mostraPartidesJugador","nomTd","diesTd","diesRestants","diff","potSpan","potTd","legenda","btnReptes","reptesPendents","reptesAcceptats","reptesProgramats","reptesTancats","drawCards","infoFn","card","reptador","reptat","h4","section","emptyMsg","st","calcLimit","mapPartides","infoTancats","partida","partida_id","limitAcceptar","limitJugar","detTancats","sumTancats","btnLlista","ordre","l","btnAcces","reptesAcces","subRepTitle","deadline_jugar","btnPartides","rankingMap","repte","repte_id","local","visitant","resultat","posLocalAfter","posVisitantAfter","swap","resultat_guanya_reptador","posLocalInicial","posVisitantInicial","undefined","posLocalText","posVisitantText","swapText","btnNormativa","join","navigator","window","serviceWorker","register","log","checkForUpdate","update","waiting","postMessage","setInterval","refreshing","location","reload","getRegistration","contains","isVisible","sm","route","handleRoute","tagName","dadesRanking","dadesClass","dadesEvents","dadesCalendari","dadesFestius","values","titol","concat","f","select","opt","selected","preparaSelectors","yearSel","modalBtns","catBtns","c","preparaSelectorsClassificacio"],"mappings":"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"}