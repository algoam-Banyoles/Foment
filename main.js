const e={ranquing:[],anys:[],anySeleccionat:null,modalitatSeleccionada:"3 BANDES",lineChart:null,classificacions:[],classYears:[],classAnySeleccionat:null,classModalitatSeleccionada:"3 BANDES",classCategoriaSeleccionada:null,events:[],isAdmin:!1,agendaSetmanaInici:(()=>{const e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()-(e.getDay()+6)%7),e})(),torneigCaramboles:{},torneigCategoriaSeleccionada:null};function t(t){e.lineChart=t}function n(e,t){const n=document.createElement("div");n.className="table-responsive",n.appendChild(t),e.appendChild(n)}function a(){const t=document.getElementById("player-chart");t&&(t.style.width="90vw",t.style.height="96vh");const n=document.getElementById("chart-canvas");n&&(n.style.width="100%",n.style.height="100%"),e.lineChart&&e.lineChart.resize()}let o=null;function i(n,i){const c=["3 BANDES","BANDA","LLIURE"],r=c.map(t=>e.ranquing.filter(e=>e.Jugador===n&&e.Modalitat===t).map(e=>({any:parseInt(e.Any,10),mitjana:parseFloat(e.Mitjana)})).sort((e,t)=>e.any-t.any)),d=[...new Set(r.flat().map(e=>e.any))].sort((e,t)=>e-t),s=["blue","green","red"],l=c.map((e,t)=>({label:e,data:d.map(e=>{const n=r[t].find(t=>t.any===e);return n?Number.parseFloat(n.mitjana):null}),borderColor:s[t],backgroundColor:s[t],tension:.2,fill:!1})),m=document.getElementById("chart-canvas"),p=document.getElementById("chart-overlay");p&&(p.style.display="flex",o=document.activeElement);const u=document.getElementById("close-chart");u&&u.focus(),a();const h=document.getElementById("chart-title");h&&(h.textContent=i);const g=m.getContext("2d");e.lineChart&&e.lineChart.destroy(),t(new Chart(g,{type:"line",data:{labels:d,datasets:l},options:{plugins:{legend:{position:"right"}},scales:{x:{title:{display:!0,text:"Any"},ticks:{stepSize:1,autoSkip:!1}},y:{title:{display:!0,text:"Mitjana"},suggestedMin:(()=>{const e=l.flatMap(e=>e.data).filter(e=>null!=e),t=e.length?Math.min(...e):0;return Math.floor(10*(t-.1))/10})(),suggestedMax:(()=>{const e=l.flatMap(e=>e.data).filter(e=>null!=e),t=e.length?Math.max(...e):1;return Math.ceil(10*(t+.1))/10})(),ticks:{beginAtZero:!1,stepSize:.1}}},responsive:!0,maintainAspectRatio:!1}}))}function c(){const t=document.getElementById("content");t.innerHTML="";const a=document.createElement("table"),o=document.createElement("tr");["Posici√≥","Jugador","Mitjana"].forEach(e=>{const t=document.createElement("th");t.textContent=e,o.appendChild(t)}),a.appendChild(o);e.ranquing.filter(t=>parseInt(t.Any,10)===e.anySeleccionat&&t.Modalitat===e.modalitatSeleccionada).sort((e,t)=>parseFloat(t.Mitjana)-parseFloat(e.Mitjana)).forEach((e,t)=>{const n=document.createElement("tr");["Posici√≥","Jugador","Mitjana"].forEach(a=>{const o=document.createElement("td");let c;c="Posici√≥"===a?t+1:"Mitjana"===a?Number.parseFloat(e[a]).toFixed(3):"Jugador"===a?e.NomComplet:e[a],o.textContent=c,"Jugador"===a&&(o.classList.add("player-cell"),o.addEventListener("click",t=>{t.stopPropagation(),i(e.Jugador,e.NomComplet)})),n.appendChild(o)}),n.addEventListener("click",()=>{i(e.Jugador,e.NomComplet)}),a.appendChild(n)}),n(t,a)}function r(){const t=document.getElementById("content");t.innerHTML="";const a=document.createElement("table"),o=document.createElement("tr");["#","Jugador","PJ","P","C","E","MG","MM"].forEach(e=>{const t=document.createElement("th");t.textContent=e,o.appendChild(t)}),a.appendChild(o);e.classificacions.filter(t=>parseInt(t.Any,10)===e.classAnySeleccionat&&t.Modalitat===e.classModalitatSeleccionada&&t.Categoria===e.classCategoriaSeleccionada).sort((e,t)=>parseInt(e.Posici√≥,10)-parseInt(t.Posici√≥,10)).forEach(e=>{const t=document.createElement("tr");[e["Posici√≥"],e.Jugador||e.Nom||"",e.PartidesJugades||e["Partides jugades"]||e.PJ||"",e.Punts,e.Caramboles,e.Entrades,e.MitjanaGeneral||e.Mitjana||"",e.MitjanaParticular||e["Millor mitjana"]||""].forEach((e,n)=>{const a=document.createElement("td");if(n>=6&&""!==e){const t=Number.parseFloat(e);e=Number.isNaN(t)?e:t.toFixed(3)}a.textContent=e,t.appendChild(a)}),a.appendChild(t)}),n(t,a)}const d=window.ADMIN_CODE;let s=0;const l=window.fetch.bind(window);window.fetch=async(e,t={})=>{const n={...t};if("string"==typeof e&&e.startsWith("/update-")){let e=localStorage.getItem("adminCode");e||(e=await u()),n.headers={...n.headers||{},"X-Admin-Code":e}}const a=await l(e,n);return 403===a.status&&(alert("Codi d'administrador incorrecte"),localStorage.removeItem("adminCode")),a};const m=document.getElementById("btn-admin");function p(t,n){const a=document.getElementById("torneig-category-buttons");if(a.innerHTML="",!t||0===t.length)return a.style.display="none",e.torneigCategoriaSeleccionada=null,void n();t.sort(),e.torneigCategoriaSeleccionada&&t.includes(e.torneigCategoriaSeleccionada)||(e.torneigCategoriaSeleccionada=t[0]),t.forEach(t=>{const o=document.createElement("button");o.textContent=`${t}a`,t===e.torneigCategoriaSeleccionada&&o.classList.add("selected"),o.addEventListener("click",()=>{e.torneigCategoriaSeleccionada=t,a.querySelectorAll("button").forEach(e=>e.classList.remove("selected")),o.classList.add("selected"),n()}),a.appendChild(o)}),a.style.display="flex",n()}function u(){const t=document.getElementById("admin-modal"),n=document.getElementById("admin-code"),a=document.getElementById("admin-submit");return new Promise(o=>{n.value="",t.style.display="block";const i=()=>{const r=n.value.trim();t.style.display="none",a.removeEventListener("click",i),n.removeEventListener("keypress",c),!/^[a-zA-Z0-9]{8,12}$/.test(r)||d&&r!==d?(alert("Codi incorrecte"),s+=1,s>=3&&m&&(m.style.display="none"),o(null)):(alert("Codi correcte"),localStorage.setItem("adminCode",r),async function(){e.isAdmin=!0;const t=document.getElementById("btn-gestio-reptes");t&&(t.style.display=""),window.gestioReptes||(window.gestioReptes=await Promise.resolve().then(function(){return y}),window.gestioReptes.initGestioReptesAdmin&&window.gestioReptes.initGestioReptesAdmin())}(),m&&(m.style.display="none"),o(r))},c=e=>{"Enter"===e.key&&i()};a.addEventListener("click",i),n.addEventListener("keypress",c)})}function h(t,a){const o=document.getElementById("content");o.innerHTML="";const i=document.getElementById("torneig-category-buttons");if(i.style.display="none",i.innerHTML="","calendari.json"===a)return void function(e){const t=document.getElementById("content");if(t.innerHTML="",!Array.isArray(e))return void(t.textContent="Dades de calendari no v√†lides.");const a=e.filter(e=>e.Data),o=e.filter(e=>!e.Data);a.sort((e,t)=>{const n=(e.Data||"").localeCompare(t.Data||"");if(0!==n)return n;const a=(e.Hora||"").localeCompare(t.Hora||"");return 0!==a?a:(parseInt((e.Billar||"").match(/\d+/),10)||0)-(parseInt((t.Billar||"").match(/\d+/),10)||0)});const i=document.createElement("div");i.id="calendari-filters";const c=document.createElement("input");c.id="calendari-player-filter",c.type="text",c.placeholder="Filtre Nom Jugador",i.appendChild(c),t.appendChild(i);const r=document.createElement("div");t.appendChild(r);const d={"01":"gen","02":"feb","03":"mar","04":"abr","05":"mai","06":"jun","07":"jul","08":"ago","09":"set",10:"oct",11:"nov",12:"des"};function s(e=""){e=(e||"").toLowerCase(),r.innerHTML="";const t=a.filter(t=>{if(!e)return!0;const n=(t["Jugador A"]||"").trim().toLowerCase(),a=(t["Jugador B"]||"").trim().toLowerCase();return n.includes(e)||a.includes(e)}),i=t.reduce((e,t)=>(e[t.Data]=(e[t.Data]||0)+1,e),{}),c=document.createElement("table"),s=document.createElement("tr");["Data","Hora","Billar","Jugador A","Jugador B"].forEach(e=>{const t=document.createElement("th");t.textContent=e,s.appendChild(t)}),c.appendChild(s);let l=null;t.forEach(e=>{const t=document.createElement("tr");if(e.Data!==l){const n=document.createElement("td"),[a,o,c]=(e.Data||"").split("-"),r=parseInt(c,10),s=o&&r?`${r}<br>${d[o]||o}`:"";n.innerHTML=s;const m=i[e.Data];m>1&&(n.rowSpan=m,n.classList.add("vertical-text")),t.appendChild(n),l=e.Data}const n=(e.Billar||"").replace("Billar ","B");let a=e.Hora||"";/^\d{1,2}:00$/.test(a)&&(a=a.split(":")[0]),[a,n,(e["Jugador A"]||"").trim(),(e["Jugador B"]||"").trim()].forEach(e=>{const n=document.createElement("td");n.textContent=e,t.appendChild(n)}),c.appendChild(t)}),n(r,c);const m=o.filter(t=>{if(!e)return!0;const n=(t["Jugador A"]||"").trim().toLowerCase(),a=(t["Jugador B"]||"").trim().toLowerCase();return n.includes(e)||a.includes(e)}).sort((e,t)=>(parseInt(e.Jornada,10)||0)-(parseInt(t.Jornada,10)||0));if(m.length>0){const e=document.createElement("h3");e.textContent="Pendent de programar",r.appendChild(e);const t=document.createElement("table"),a=document.createElement("tr");["Jornada","J1","J2"].forEach(e=>{const t=document.createElement("th");t.textContent=e,a.appendChild(t)}),t.appendChild(a),m.forEach(e=>{const n=document.createElement("tr");[e.Jornada||"",(e["Jugador A"]||"").trim(),(e["Jugador B"]||"").trim()].forEach(e=>{const t=document.createElement("td");t.textContent=e,n.appendChild(t)}),t.appendChild(n)}),n(r,t)}}c.addEventListener("input",()=>{s(c.value.trim().toLowerCase())}),s()}(t);if("partides.json"===a){return void p([...new Set(t.map(e=>e["üèÜ Categoria de la partida"]))],()=>function(t){const a=document.getElementById("content");if(a.innerHTML="",!Array.isArray(t))return void(a.textContent="Dades de partides no v√†lides.");t.sort((e,t)=>{const n=new Date(e.Timestamp);return new Date(t.Timestamp)-n});const o=document.createElement("div");o.id="partides-filters";const i=document.createElement("input");i.id="partides-player-filter",i.type="text",i.placeholder="Filtre Nom Jugador",o.appendChild(i),a.appendChild(o);const c=document.createElement("div");function r(a=""){a=(a||"").toLowerCase(),c.innerHTML="",t.filter(t=>t["üèÜ Categoria de la partida"]===e.torneigCategoriaSeleccionada).filter(e=>{if(!a)return!0;const t=(e["üé± Nom del Jugador 1"]||"").trim().toLowerCase(),n=(e["üé± Nom del Jugador 2"]||"").trim().toLowerCase();return t.includes(a)||n.includes(a)}).forEach((e,t)=>{const a=(e["üé± Nom del Jugador 1"]||"").trim(),o=(e["üé± Nom del Jugador 2"]||"").trim(),i=parseInt(e["üî¢ Caramboles del Jugador 1"],10)||0,r=parseInt(e["üî¢ Caramboles del Jugador 2"],10)||0,d=e["‚è±Ô∏è Entrades de la partida"]||"",s=(parseFloat(e["Mitjana J1"])||0).toFixed(3),l=(parseFloat(e["Mitjana J2"])||0).toFixed(3),m=i>r?" üèÜ":"",p=r>i?" üèÜ":"",u=document.createElement("table");u.className="partida";const h=document.createElement("colgroup");if(["jugadors","c","e","m"].forEach(e=>{const t=document.createElement("col");t.className=e,h.appendChild(t)}),u.appendChild(h),0===t){const e=document.createElement("thead"),t=document.createElement("tr");["Jugadors","C","E","M"].forEach(e=>{const n=document.createElement("th");n.textContent=e,t.appendChild(n)}),e.appendChild(t),u.appendChild(e)}const g=document.createElement("tbody"),E=document.createElement("tr"),C=document.createElement("tr"),f=document.createElement("td");f.textContent=`${a}${m}`;const y=document.createElement("td");y.textContent=i;const b=document.createElement("td");b.textContent=d,b.rowSpan=2;const v=document.createElement("td");v.textContent=s,E.appendChild(f),E.appendChild(y),E.appendChild(b),E.appendChild(v);const x=document.createElement("td");x.textContent=`${o}${p}`;const L=document.createElement("td");L.textContent=r;const I=document.createElement("td");I.textContent=l,C.appendChild(x),C.appendChild(L),C.appendChild(I),g.appendChild(E),g.appendChild(C),u.appendChild(g),n(c,u)})}a.appendChild(c),i.addEventListener("input",()=>{r(i.value.trim().toLowerCase())}),r()}(t))}if(!t)return;if(Array.isArray(t)&&0===t.length){const e=document.createElement("p");return e.textContent="No hi ha dades.",void o.appendChild(e)}if("classificacio.json"!==a&&Array.isArray(t)&&t[0]&&("Categoria jugador"in t[0]&&"Nom jugador"in t[0]||"Categoria"in t[0]&&"Nom"in t[0])){const n="Categoria jugador"in t[0]?"Categoria jugador":"Categoria",a="Nom jugador"in t[0]?"Nom jugador":"Nom",i=t.reduce((e,t)=>{const o=t[n];return e[o]||(e[o]=[]),e[o].push((t[a]||"").trim()),e},{});return void p(Object.keys(i),()=>{o.innerHTML="";const t=e.torneigCategoriaSeleccionada,n=document.createElement("h3"),a=e.torneigCaramboles[t];n.textContent=a?`${t}a categoria (${a} caramboles)`:`${t}a categoria`,o.appendChild(n);const c=document.createElement("ul");(i[t]||[]).forEach(e=>{const t=document.createElement("li");t.textContent=e,c.appendChild(t)}),o.appendChild(c)})}if("classificacio.json"===a&&Array.isArray(t)&&t[0]&&"Posici√≥"in t[0]){const a=t.reduce((e,t)=>{const n=t.Categoria||"";return e[n]||(e[n]=[]),e[n].push(t),e},{});return void p(Object.keys(a),()=>{o.innerHTML="";const t=e.torneigCategoriaSeleccionada,i=document.createElement("h3"),c=e.torneigCaramboles[t];i.textContent=c?`${t}a categoria (${c} caramboles)`:`${t}a categoria`,o.appendChild(i);const r=document.createElement("table"),d=document.createElement("tr");["#","Jugador","PJ","P","C","E","MG","MM"].forEach(e=>{const t=document.createElement("th");t.textContent=e,d.appendChild(t)}),r.appendChild(d),(a[t]||[]).sort((e,t)=>{const n=parseInt(e.Punts,10)||0,a=parseInt(t.Punts,10)||0;if(a!==n)return a-n;const o=parseFloat(e.MitjanaGeneral||e.Mitjana||"0");return parseFloat(t.MitjanaGeneral||t.Mitjana||"0")-o}).forEach((e,t)=>{const n=document.createElement("tr");[t+1,e.Nom||"",e.PartidesJugades||e["Partides jugades"]||e.PJ||"",e.Punts,e.Caramboles,e.Entrades,e.MitjanaGeneral||e.Mitjana||"",e.MitjanaParticular||e["Millor mitjana"]||""].forEach((e,t)=>{const a=document.createElement("td");if(t>=6&&""!==e){const t=Number.parseFloat(e);e=Number.isNaN(t)?e:t.toFixed(3)}a.textContent=e,n.appendChild(a)}),r.appendChild(n)}),n(o,r)})}if(Array.isArray(t)&&t[0]&&"Categoria"in t[0]){const a=t.reduce((e,t)=>{const n=t.Categoria||"";return e[n]||(e[n]=[]),e[n].push(t),e},{}),i=Object.keys(t[0]).filter(e=>"Categoria"!==e);return void p(Object.keys(a),()=>{o.innerHTML="";const t=e.torneigCategoriaSeleccionada,c=document.createElement("h3"),r=e.torneigCaramboles[t];c.textContent=r?`${t}a categoria (${r} caramboles)`:`${t}a categoria`,o.appendChild(c);const d=document.createElement("table"),s=document.createElement("tr");i.forEach(e=>{const t=document.createElement("th");t.textContent=e,s.appendChild(t)}),d.appendChild(s),(a[t]||[]).forEach(e=>{const t=document.createElement("tr");i.forEach(n=>{const a=document.createElement("td");a.textContent=e[n]||"",t.appendChild(a)}),d.appendChild(t)}),n(o,d)})}if(Array.isArray(t)&&Array.isArray(t[0])){const e=t[0],a=document.createElement("table"),i=document.createElement("tr");return e.forEach(e=>{const t=document.createElement("th");t.textContent=e,i.appendChild(t)}),a.appendChild(i),t.slice(1).forEach(t=>{const n=document.createElement("tr");e.forEach((e,a)=>{const o=document.createElement("td");o.textContent=t[a]||"",n.appendChild(o)}),a.appendChild(n)}),void n(o,a)}if(Array.isArray(t)&&"object"==typeof t[0]){const e=[...new Set(t.flatMap(e=>Object.keys(e)))],a=document.createElement("table"),i=document.createElement("tr");return e.forEach(e=>{const t=document.createElement("th");t.textContent=e,i.appendChild(t)}),a.appendChild(i),t.forEach(t=>{const n=document.createElement("tr");e.forEach(e=>{const a=document.createElement("td");a.textContent=t[e]||"",n.appendChild(a)}),a.appendChild(n)}),void n(o,a)}const c=document.createElement("pre");c.textContent=JSON.stringify(t,null,2),o.appendChild(c)}m&&m.addEventListener("click",async()=>{await u()});const g=["filters-row","classificacio-filters","torneig-buttons","torneig-title","torneig-category-buttons","continu3b-buttons","campionats-disclaimer","content"];function E(){g.forEach(e=>{const t=document.getElementById(e);t&&(t.style.display="none")})}const C={"btn-ranking":{show:[{id:"filters-row",display:"flex"}],action:c},"btn-classificacio":{show:[{id:"classificacio-filters",display:"flex"}],action:r},"btn-agenda":{action:function(){const t=document.getElementById("content");t.innerHTML="";const a=document.createElement("div");a.id="calendar-container";const o=document.createElement("div");o.className="calendar-nav";const i=document.createElement("button");i.textContent="<";const c=document.createElement("button");c.textContent=">";const r=document.createElement("span");r.id="calendar-month",i.addEventListener("click",()=>{e.agendaSetmanaInici.setDate(e.agendaSetmanaInici.getDate()-7),h()}),c.addEventListener("click",()=>{e.agendaSetmanaInici.setDate(e.agendaSetmanaInici.getDate()+7),h()}),o.appendChild(i),o.appendChild(r),o.appendChild(c),a.appendChild(o);const d=document.createElement("table");d.className="calendar-table";const s=document.createElement("tr");["Dl","Dt","Dc","Dj","Dv","Ds","Dg"].forEach(e=>{const t=document.createElement("th");t.textContent=e,s.appendChild(t)}),d.appendChild(s);const l=document.createElement("tbody");d.appendChild(l),n(a,d),t.appendChild(a);const m=document.createElement("table");m.id="event-list",m.classList.add("agenda-table"),n(t,m);const p=new Date;let u=new Date(Date.UTC(p.getFullYear(),p.getMonth(),p.getDate())).toISOString().split("T")[0];function h(){const t=new Date(e.agendaSetmanaInici);t.setDate(e.agendaSetmanaInici.getDate()+6);const n=new Date(e.agendaSetmanaInici);n.setDate(e.agendaSetmanaInici.getDate()+7),(new Date(u)<e.agendaSetmanaInici||new Date(u)>=n)&&(u=e.agendaSetmanaInici.toISOString().split("T")[0]);const a=e.agendaSetmanaInici.toLocaleDateString("ca-ES",{day:"numeric",month:"short"}),o=t.toLocaleDateString("ca-ES",{day:"numeric",month:"short",year:"numeric"});r.textContent=`${a} - ${o}`,function(){l.innerHTML="";const t=document.createElement("tr");for(let n=0;n<7;n++){const a=document.createElement("td"),o=new Date(e.agendaSetmanaInici);o.setDate(e.agendaSetmanaInici.getDate()+n);const i=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())).toISOString().split("T")[0];a.textContent=o.getDate(),a.dataset.date=i;const c=e.events.filter(e=>e.Data===i);if(c.length>0){let e="event-other";c.some(e=>"festiu"===e.Categoria)?e="event-festiu":c.some(e=>"assemblea"===e.Categoria)?e="event-assemblea":c.some(e=>"partida"===e.Categoria)?e="event-partida":c.some(e=>e["T√≠tol"].includes("Fi"))?e="event-fi":c.some(e=>e["T√≠tol"].includes("Inici"))&&(e="event-inici"),a.classList.add(e)}i===u&&a.classList.add("selected-day"),a.addEventListener("click",()=>{u=i,h()}),t.appendChild(a)}l.appendChild(t)}(),function(){m.innerHTML="";const t=document.createElement("tr");["Data","T√≠tol"].forEach(e=>{const n=document.createElement("th");n.textContent=e,t.appendChild(n)}),m.appendChild(t),e.events.filter(e=>e.Data===u).sort((e,t)=>(e.Hora||"").localeCompare(t.Hora||"")).forEach(e=>{const t=document.createElement("tr");t.dataset.date=e.Data;let n="event-other";"festiu"===e.Categoria?n="event-festiu":"assemblea"===e.Categoria?n="event-assemblea":"partida"===e.Categoria?n="event-partida":e["T√≠tol"].includes("Fi")?n="event-fi":e["T√≠tol"].includes("Inici")&&(n="event-inici"),t.classList.add(n),["Data","T√≠tol"].forEach(n=>{const a=document.createElement("td");if("Data"===n){const[t,n,o]=(e.Data||"").split("-");a.textContent=`${o}/${n}`}else{const t=e[n]||"",o=(e.Tipus||"").toLowerCase();"confirmat"===o?a.innerHTML=`<strong>${t}</strong>`:"previsi√≥"===o||"previsio"===o?a.innerHTML=`<em>${t} (previsi√≥)</em>`:a.textContent=t}t.appendChild(a)}),m.appendChild(t)})}()}h()}},"btn-horari":{action:function(){document.getElementById("content").innerHTML='\n<div class="normes-container">\n  <h2 class="normes-title">Normes d‚Äô√∫s i horari</h2>\n\n  \x3c!-- Horari --\x3e\n  <div class="normes-card horari">\n    <h3>üïí Horari d\'obertura de la Secci√≥</h3>\n    <ul>\n      <li><b>Dilluns, dimecres, dijous, dissabte i diumenge:</b> 9:00 ‚Äì 21:30</li>\n      <li><b>Dimarts i divendres:</b> 10:30 ‚Äì 21:30</li>\n      <li>L\'horari d\'obertura pot canviar en funci√≥ dels horaris d\'obertura del <b>Bar del Foment</b>.</li>\n      <li>L\'horari d\'atenci√≥ al p√∫blic del <b>FOMENT</b> √©s de <b>DILLUNS A DIVENDRES</b> de <b>9:00 A 13:00</b> i de <b>16:00 A 20:00</b>.</li>\n      <li>Les seccions poden tenir activitat fora d\'aquest horari si el bar est√† obert, excepte <b>AGOST</b> i <b>FESTIUS</b>, quan el <b>FOMENT</b> resta oficialment tancat.</li>\n      <li>La secci√≥ romandr√† tancada els dies de <b>TANCAMENT OFICIAL</b> del <b>FOMENT</b>.</li>\n\n    </ul>\n  </div>\n\n  \x3c!-- Norma Obligat√≤ria --\x3e\n  <div class="normes-card obligatori">\n    <h3>üö® OBLIGATORI</h3>\n    <p class="obligatori-text">\n      Netejar el billar i les boles abans de comen√ßar cada partida amb el material que la Secci√≥ posa a disposici√≥ de tots els socis.\n    </p>\n  </div>\n\n  \x3c!-- Prohibicions --\x3e\n  <div class="normes-card prohibit">\n\n    <h3>üö´ PROHIBIT</h3>\n\n    <ul>\n      <li>Jugar a fantasia.</li>\n      <li>Menjar mentre s\'est√† jugant.</li>\n      <li>Posar begudes sobre cap element del billar.</li>\n    </ul>\n  </div>\n\n  \x3c!-- Inscripci√≥ --\x3e\n  <div class="normes-card">\n    <h3>üìù Inscripci√≥ a les partides</h3>\n    <ul>\n      <li>Apunta‚Äôt a la pissarra √∫nica de <b>PARTIDES SOCIALS</b>.</li>\n      <li>Els companys no cal que s‚Äôapuntin; si ho fan, que sigui al costat del primer jugador.</li>\n    </ul>\n  </div>\n\n  \x3c!-- Assignaci√≥ de taula --\x3e\n  <div class="normes-card">\n    <h3>üóÇ Assignaci√≥ de taula</h3>\n    <ul>\n      <li>Quan hi hagi una taula lliure, ratlla el teu nom i juga.</li>\n      <li>Si vols una taula concreta ocupada, <b>passa el torn</b> fins que s‚Äôalliberi.</li>\n    </ul>\n  </div>\n\n  \x3c!-- Temps de joc --\x3e\n  <div class="normes-card">\n    <h3>‚è≥ Temps de joc</h3>\n    <ul>\n      <li>M√†xim <b>1 hora</b> per partida (sol o en grup).</li>\n      <li><b>PROHIBIT</b> posar monedes per allargar el temps, encara que hi hagi taules lliures.</li>\n    </ul>\n  </div>\n\n  \x3c!-- Tornar a jugar --\x3e\n  <div class="normes-card">\n    <h3>üîÑ Tornar a jugar</h3>\n    <ul>\n      <li>Nom√©s pots repetir si <b>no hi ha ning√∫ apuntat</b> i hi ha una taula lliure.</li>\n    </ul>\n  </div>\n</div>\n  '}},"btn-enllacos":{action:function(){const e=document.getElementById("content");e.innerHTML="",fetch("data/enllacos.json").then(e=>e.json()).then(t=>{const n={};t.forEach(e=>{const t=e.Tipus||"Altres";n[t]||(n[t]=[]),n[t].push(e)}),Object.entries(n).forEach(([t,n])=>{const a=document.createElement("details"),o=document.createElement("summary");o.textContent=t,o.classList.add("enllac-tipus"),a.appendChild(o),n.forEach(e=>{const t=e.URL||e.Url||e.url;if(t){const n=a.querySelector("ul")||document.createElement("ul"),o=document.createElement("li"),i=document.createElement("a");i.href=t,i.target="_blank",i.rel="noopener";let c=e.T√≠tol||e.Titol||e.Nom||e.Name||e.Text||t;e.Billar&&(c+=` - Billar ${e.Billar}`),i.textContent=c,o.appendChild(i),n.appendChild(o),a.appendChild(n)}}),e.appendChild(a)})}).catch(t=>{e.textContent="No s'han pogut carregar els enlla√ßos.",console.error("Error loading links",t)})}},"btn-continu3b":{show:[{id:"continu3b-buttons",display:"flex"},{id:"campionats-disclaimer",display:"block"}],action:function(){const t=document.getElementById("content");t.innerHTML="";const a=document.getElementById("continu3b-buttons");a.innerHTML="",Promise.all([fetch("data/continu3b_rankingactiu.json").then(e=>e.json()).catch(()=>[]),fetch("data/continu3b_llistaespera.json").then(e=>e.json()).catch(()=>[]),fetch("data/continu3b_reptes.json").then(e=>e.json()).catch(()=>[]),fetch("data/continu3b_partides.json").then(e=>e.json()).catch(()=>[]),fetch("data/continu3b_jugadors.json").then(e=>e.json()).catch(()=>[])]).then(([o,i,c,r,d])=>{const s=Object.fromEntries(d.map(e=>[e.id,e.nom]));const l=(e,n)=>{a.querySelectorAll("button").forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),t.innerHTML="",n()},m=document.createElement("label");m.id="ranking-filter-disponibles";const p=document.createElement("input");p.type="checkbox",m.appendChild(p),m.appendChild(document.createTextNode(" Mostra nom√©s disponibles"));const u=document.createElement("button");u.textContent="R√†nquing actual",p.addEventListener("change",()=>u.click()),u.addEventListener("click",()=>l(u,()=>{const e=document.createElement("h3");if(e.textContent="R√†nquing actual",t.appendChild(e),Array.isArray(o)&&o.length){const e=document.createElement("table");e.classList.add("ranking-table");const a=document.createElement("thead"),i=document.createElement("tr");["Posici√≥","Jugador","Pot reptar","Pot ser reptat","Motiu","Termini per nou repte"].forEach(e=>{const t=document.createElement("th");t.textContent=e,i.appendChild(t)}),a.appendChild(i),e.appendChild(a);const c=document.createElement("tbody");o.slice().sort((e,t)=>parseInt(e.posicio)-parseInt(t.posicio)).forEach(e=>{const a=d.find(t=>t.id===e.jugador_id)||{},o="OK"===a.pot_reptar,i="OK"===a.pot_ser_reptat,l=a.eligibility_reptar_motiu;let m="",h="";if(l&&"NOW"!==l){const e=l.match(/^(\w+)(?:\((\d+)\))?$/);if(e){if(m={ACCEPTED:"Repte actiu"}[e[1]]||e[1],e[2]){const t=parseInt(e[2],10);h=`${t} ${1===t?"dia":"dies"}`}}else m=l}const g=o&&i;if(p.checked&&!g)return;const E=document.createElement("tr"),C=document.createElement("td");C.textContent=e.posicio,C.classList.add("ranking-pos"),E.appendChild(C);const f=s[e.jugador_id]||e.jugador_id,y=document.createElement("button");y.textContent=f,y.addEventListener("click",()=>function(e,a){t.innerHTML="";const o=document.createElement("h3");o.textContent=`Partides de ${a}`,t.appendChild(o);const i=r.filter(t=>t.local_id===e||t.visitant_id===e);if(i.length){const a=document.createElement("table"),o=document.createElement("thead"),c=document.createElement("tr");["Data","Rival","Resultat"].forEach(e=>{const t=document.createElement("th");t.textContent=e,c.appendChild(t)}),o.appendChild(c),a.appendChild(o);const r=document.createElement("tbody");i.forEach(t=>{const n=document.createElement("tr"),a=t.data?new Date(t.data).toLocaleDateString("ca-ES"):"",o=t.local_id===e,i=o?t.visitant_id:t.local_id;[a,s[i]||i,t.caramboles_local&&t.caramboles_visitant?o?`${t.caramboles_local}-${t.caramboles_visitant}`:`${t.caramboles_visitant}-${t.caramboles_local}`:""].forEach(e=>{const t=document.createElement("td");t.textContent=e,n.appendChild(t)}),r.appendChild(n)}),a.appendChild(r),n(t,a)}else{const e=document.createElement("p");e.textContent="No hi ha partides per aquest jugador.",t.appendChild(e)}const c=document.createElement("button");c.textContent="Torna",c.addEventListener("click",()=>u.click()),t.appendChild(c)}(e.jugador_id,f));const b=document.createElement("td");b.classList.add("ranking-name"),b.appendChild(y),E.appendChild(b);const v=document.createElement("td"),x=document.createElement("span");x.textContent=o?"üü¢":"üî¥",x.title=o?"Pot reptar":"No pot reptar",v.dataset.label="Pot reptar",v.appendChild(x),E.appendChild(v);const L=document.createElement("td"),I=document.createElement("span");I.textContent=i?"üü¢":"üî¥",I.title=i?"Pot ser reptat":"No pot ser reptat",L.dataset.label="Pot ser reptat",L.appendChild(I),E.appendChild(L);const S=document.createElement("td");S.dataset.label="Motiu",S.textContent=m,E.appendChild(S);const j=document.createElement("td");j.dataset.label="Termini per nou repte",j.textContent=h,E.appendChild(j),c.appendChild(E)}),e.appendChild(c);const l=document.createElement("div");["üü¢ S√≠","üî¥ No"].forEach(e=>{const t=document.createElement("p");t.textContent=e,l.appendChild(t)}),t.appendChild(l),t.appendChild(m),n(t,e)}else{const e=document.createElement("p");e.textContent="No hi ha r√†nquing disponible.",t.appendChild(e)}}));const h=(e,n)=>{const a=c.filter(n),o=a.filter(e=>"proposat"===e.estat),i=a.filter(e=>"acceptat"===e.estat),d=a.filter(e=>"programat"===e.estat),l=a.filter(e=>"tancat"===e.estat),m=document.createElement("h3");m.textContent=e,t.appendChild(m);const p=(e,n,a=t)=>{e.forEach(e=>{const t=document.createElement("div");t.classList.add("repte-card");const o=s[e.reptador_id]||e.reptador_id,i=s[e.reptat_id]||e.reptat_id,c=document.createElement("h4");c.textContent=`${o} vs ${i}`,t.appendChild(c);n(e).forEach(([e,n])=>{if(n){const a=document.createElement("p"),o=new Date(n);a.textContent=`${e}: ${isNaN(o)?n:o.toLocaleDateString("ca-ES")}`,t.appendChild(a)}}),a.appendChild(t)})},u=(e,n,a,o)=>{const i=document.createElement("h4");if(i.textContent=e,t.appendChild(i),n.length)p(n,a);else{const e=document.createElement("p");e.textContent=o,t.appendChild(e)}},h=e=>e?new Date(new Date(e).getTime()+6048e5):null,g=Object.fromEntries(r.map(e=>[e.id,e])),E={REFUS:"Ref√∫s",INCOMPAREIXENCA:"Incompareixen√ßa",RESULTAT:"Resultat"},C=e=>{const t=g[e.partida_id]||{},n=!t.data&&e.resultat_motiu?E[e.resultat_motiu]||e.resultat_motiu:null;return[["Creaci√≥",e.created_at],["Acceptaci√≥",e.data_acceptacio],["Programaci√≥",e.data_programa],["Jugat",t.data],["Motiu tancament",n]]};u("Pendents d‚Äôacceptar",o,e=>{const t=h(e.created_at),n=h(t);return[["Creaci√≥",e.created_at],["L√≠mit acceptar",t],["L√≠mit jugar",n]]},"No hi ha reptes pendents."),u("Acceptats",i,e=>[["Creaci√≥",e.created_at],["Acceptaci√≥",e.data_acceptacio],["L√≠mit jugar",h(e.data_acceptacio||e.created_at)]],"No hi ha reptes acceptats."),u("Programats",d,e=>[["Creaci√≥",e.created_at],["Acceptaci√≥",e.data_acceptacio],["Programaci√≥",e.data_programa],["L√≠mit jugar",h(e.data_acceptacio||e.created_at)]],"No hi ha reptes programats.");const f=document.createElement("details");f.id="reptes-tancats";const y=document.createElement("summary");if(y.textContent="Tancats",f.appendChild(y),l.length)p(l,C,f);else{const e=document.createElement("p");e.textContent="No hi ha reptes tancats.",f.appendChild(e)}t.appendChild(f)},g=document.createElement("button");g.textContent="Reptes",g.addEventListener("click",()=>l(g,()=>h("Reptes",e=>"acces"!==e.tipus)));const E=document.createElement("button");E.textContent="Llista d'espera",E.addEventListener("click",()=>l(E,()=>{const e=document.createElement("h3");if(e.textContent="Llista d'espera",t.appendChild(e),Array.isArray(i)&&i.length){const e=document.createElement("table");e.classList.add("ranking-table","no-medals");const a=document.createElement("thead"),o=document.createElement("tr");["Posici√≥","Jugador","Pot reptar"].forEach(e=>{const t=document.createElement("th");t.textContent=e,o.appendChild(t)}),a.appendChild(o),e.appendChild(a);const c=document.createElement("tbody");i.slice().sort((e,t)=>parseInt(e.ordre,10)-parseInt(t.ordre,10)).forEach((e,t)=>{const n=document.createElement("tr"),a=document.createElement("td");a.textContent=e.ordre,a.classList.add("ranking-pos"),n.appendChild(a);const o=s[e.jugador_id]||e.jugador_id,i=document.createElement("button");i.textContent=o,i.addEventListener("click",()=>mostraEvolucioJugador(e.jugador_id,o));const r=document.createElement("td");r.classList.add("ranking-name"),r.appendChild(i),n.appendChild(r);const d=document.createElement("td"),l=document.createElement("span"),m=0===t;l.textContent=m?"üü¢":"üî¥",l.title=m?"Pot reptar el jugador 20":"No pot reptar",d.dataset.label="Pot reptar",d.appendChild(l),n.appendChild(d),c.appendChild(n)}),e.appendChild(c);const r=document.createElement("div");["üü¢ Pot reptar","üî¥ No pot reptar"].forEach(e=>{const t=document.createElement("p");t.textContent=e,r.appendChild(t)}),t.appendChild(r),n(t,e)}else{const e=document.createElement("p");e.textContent="No hi ha jugadors en llista d'espera.",t.appendChild(e)}}));const C=document.createElement("button");C.textContent="Reptes acc√©s",C.addEventListener("click",()=>l(C,()=>h("Reptes acc√©s",e=>"acces"===e.tipus)));const f=document.createElement("button");f.textContent="Partides",f.addEventListener("click",()=>l(f,()=>{const e=document.createElement("h3");if(e.textContent="Partides",t.appendChild(e),Array.isArray(r)&&r.length){const e=Object.fromEntries(o.map(e=>[e.jugador_id,parseInt(e.posicio,10)]));r.slice().sort((e,t)=>new Date(t.data)-new Date(e.data)).forEach(n=>{const a=document.createElement("div");a.classList.add("partida-card");const o=c.find(e=>e.id===n.repte_id)||{},i=s[n.local_id]||n.local_id,r=s[n.visitant_id]||n.visitant_id;let d="";n.caramboles_local&&n.caramboles_visitant?d=`${n.caramboles_local}-${n.caramboles_visitant}`:o.resultat_motiu&&"RESULTAT"!==o.resultat_motiu&&(d=o.resultat_motiu.toLowerCase().replace(/_/g," "),d=d.charAt(0).toUpperCase()+d.slice(1));const l=e[n.local_id],m=e[n.visitant_id],p="TRUE"===o.resultat_guanya_reptador;let u=l,h=m;p&&void 0!==l&&void 0!==m&&(u=m,h=l);const g=void 0!==u?u:"-",E=void 0!==h?h:"-",C=p?"Intercanvi de posicions":"No intercanvi de posicions",f=n.data?new Date(n.data).toLocaleDateString("ca-ES"):"";a.innerHTML=`\n                <h4>${f}</h4>\n                <p>${i} (Pos. ${g}) vs ${r} (Pos. ${E})</p>\n                <p>Resultat: ${d}</p>\n                <p>${C}</p>\n              `,t.appendChild(a)})}else{const e=document.createElement("p");e.textContent="No hi ha partides registrades.",t.appendChild(e)}}));const b=document.createElement("button");b.id="btn-gestio-reptes",b.textContent="Gesti√≥ reptes",b.addEventListener("click",()=>l(b,async()=>{const e=window.gestioReptes||await Promise.resolve().then(function(){return y});window.gestioReptes=e,e.mostraGestioReptes(t)})),e.isAdmin||(b.style.display="none");const v=document.createElement("button");v.textContent="Normativa",v.addEventListener("click",()=>l(v,()=>{t.innerHTML='\n<div class="normes-container">\n  <h2 class="normes-title">Normativa Continu 3B</h2>\n\n  <div class="normes-card">\n    <h3>üìä R√†nquing actiu</h3>\n    <ul>\n      <li><strong>M√†xim 20 jugadors</strong>, actualitzat cont√≠nuament mitjan√ßant reptes directes</li>\n      <li>Els jugadors que vulguin formar part del r√†nquing un cop s\'arribi al m√†xim de 20 jugadors formaran part de la <strong>llista d\'espera</strong>.</li>\n    </ul>\n  </div>\n\n  <div class="normes-card">\n    <h3>‚öîÔ∏è Reptes normals</h3>\n    <ul>\n      <li>Pots reptar fins a <strong>2 posicions</strong> per sobre teu.</li>\n      <li><strong>M√†xim un repte actiu</strong> per jugador.</li>\n      <li><strong>M√≠nim 7 dies</strong> entre reptes.</li>\n      <li>Si guanya el reptador ‚Üí <strong>intercanvi de posicions</strong>.</li>\n      <li>Si perd el reptador ‚Üí <strong>no hi ha canvis</strong>.</li>\n    </ul>\n  </div>\n\n  <div class="normes-card">\n    <h3>üö™ Reptes d‚Äôacc√©s</h3>\n    <ul>\n      <li><strong>Primer de la llista d‚Äôespera</strong> pot reptar el jugador 20.</li>\n      <li>Si guanya ‚Üí <strong>entra al r√†nquing</strong> (pos. 20) i el perdedor passa a la llista d‚Äôespera.</li>\n      <li>Si perd ‚Üí passa al final de la <strong>llista d‚Äôespera</strong>.</li>\n    </ul>\n  </div>\n\n  <div class="normes-card">\n    <h3>‚è±Ô∏è Terminis</h3>\n    <p><strong>7 dies</strong> per acceptar un repte i <strong>7 dies</strong> per jugar-lo un cop acceptat.</p>\n  </div>\n\n  <div class="normes-card">\n    <h3>‚ö†Ô∏è Penalitzacions</h3>\n    <ul>\n      <li>Incompareixen√ßa o ref√∫s sense motiu ‚Üí <strong>derrota autom√†tica</strong>.</li>\n      <li>Sense acord de data ‚Üí tots dos <strong>perden una posici√≥</strong>.</li>\n    </ul>\n  </div>\n\n  <div class="normes-card">\n    <h3>üò¥ Inactivitat</h3>\n    <ul>\n      <li><strong>3 setmanes</strong> sense reptes ‚Üí baixa 5 posicions (pre-inactiu).</li>\n      <li><strong>6 setmanes</strong> sense reptes ‚Üí surt del r√†nquing i entra el primer de la llista d‚Äôespera.</li>\n    </ul>\n  </div>\n\n  <div class="normes-card">\n    <p>Consulta la <a href="https://docs.google.com/document/d/165_bh9m0WxRU_LoTt_k8aiJseZZn9bBZ/edit?usp=sharing&amp;ouid=102336298592739127647&amp;rtpof=true&amp;sd=true" target="_blank" rel="noopener"><strong>normativa completa</strong></a>.</p>\n  </div>\n</div>'})),[u,g,E,C,f,v,b].forEach(e=>a.appendChild(e)),u.click()}).catch(e=>{console.error("Error carregant dades continu 3B",e),t.innerHTML="<p>Error carregant dades.</p>"})}},"btn-torneig":{show:[{id:"torneig-buttons",display:"flex"},{id:"campionats-disclaimer",display:"block"}],action:function(){document.getElementById("content").innerHTML="",fetch("data/modalitat.json").then(e=>e.json()).then(e=>{const t=document.getElementById("torneig-title"),n=Array.isArray(e)?e.map(e=>e.Modalitat).join(", "):e.Modalitat||"";t.textContent=`Social Modalitat ${n}`,t.style.display="block"}).catch(()=>{document.getElementById("torneig-title").style.display="none"})}}};let f;"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(e=>{console.log("SW registrat!",e);const t=()=>{e.update().then(()=>{e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"})})};t(),setInterval(t,864e5)}).catch(e=>console.error("Error al registrar el SW:",e));let e=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(window.location.reload(),e=!0)})}),function(){const e=document.getElementById("btn-install");e&&(e.style.display="none",window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),f=t,e.style.display="inline-block"}),e.addEventListener("click",async()=>{f&&(f.prompt(),await f.userChoice,f=null,e.style.display="none")}),window.addEventListener("appinstalled",()=>{f=null,e.style.display="none"}))}(),document.getElementById("menu").addEventListener("click",e=>{if(e.target.classList.contains("menu-toggle")){const t=document.getElementById(e.target.dataset.target),n="flex"===t.style.display;document.querySelectorAll(".submenu").forEach(e=>e.style.display="none"),t.style.display=n?"none":"flex",E()}}),document.getElementById("submenu-container").addEventListener("click",e=>{const t=C[e.target.id];t&&function(e){E(),document.getElementById("content").style.display="block",(e.show||[]).forEach(({id:e,display:t})=>{const n=document.getElementById(e);n&&(n.style.display=t)}),e.action&&e.action()}(t)}),document.getElementById("torneig-buttons").addEventListener("click",e=>{if("BUTTON"===e.target.tagName){const t=e.target.dataset.file;fetch(`data/${t}`).then(e=>e.json()).then(e=>h(e,t)).catch(()=>{document.getElementById("content").innerHTML="<p>Error carregant dades.</p>"})}}),document.getElementById("close-chart").addEventListener("click",function(){document.getElementById("chart-overlay").style.display="none";const n=document.getElementById("chart-title");n&&(n.textContent=""),e.lineChart&&(e.lineChart.destroy(),t(null)),o&&(o.focus(),o=null)}),window.addEventListener("resize",function(){const e=document.getElementById("chart-overlay");e&&"none"!==e.style.display&&a()}),Promise.all([fetch("data/ranquing.json").then(e=>e.json()),fetch("data/classificacions.json").then(e=>e.json()).catch(()=>[]),fetch("data/events.json").then(e=>e.json()).catch(()=>[]),fetch("data/calendari.json").then(e=>e.json()).catch(()=>[]),fetch("data/festius.json").then(e=>e.json()).catch(()=>[])]).then(([t,n,a,o,i])=>{e.ranquing=t,e.anys=[...new Set(t.map(e=>parseInt(e.Any,10)))].sort((e,t)=>e-t),e.anySeleccionat=e.anys[e.anys.length-1],e.classificacions=n,e.classYears=[...new Set(n.map(e=>parseInt(e.Any,10)))].sort((e,t)=>e-t),e.classAnySeleccionat=e.classYears[e.classYears.length-1]||null;const d=new Set(n.map(e=>e.Categoria));e.classCategoriaSeleccionada=d.values().next().value||null,e.events=a.map(e=>{const t=e["T√≠tol"]||e.Titol||"";return{...e,"T√≠tol":t,Categoria:t.toLowerCase().includes("assemblea")?"assemblea":"altre"}}).concat(o.map(e=>({Data:e.Data,Hora:"","T√≠tol":`${e["Jugador A"].trim()} vs ${e["Jugador B"].trim()} (${e.Hora})`,Tipus:"",Categoria:"partida"}))).concat(i.map(e=>({Data:e.Data,Hora:"","T√≠tol":`Foment tancat (${e.T√≠tol||""})`,Tipus:"",Categoria:"festiu"}))),function(){const t=document.getElementById("year-select");t.innerHTML="",e.anys.slice().sort((e,t)=>t-e).forEach(n=>{const a=document.createElement("option");a.value=n,a.textContent=n,n===e.anySeleccionat&&(a.selected=!0),t.appendChild(a)}),t.addEventListener("change",()=>{e.anySeleccionat=parseInt(t.value,10),c()});const n=document.getElementById("modalitat-buttons");n.querySelectorAll("button").forEach(t=>{t.dataset.mod===e.modalitatSeleccionada&&t.classList.add("selected"),t.addEventListener("click",()=>{e.modalitatSeleccionada=t.dataset.mod,n.querySelectorAll("button").forEach(e=>e.classList.remove("selected")),t.classList.add("selected"),c()})})}(),function(){const t=document.getElementById("classificacio-year-select");t.innerHTML="",e.classYears.slice().sort((e,t)=>t-e).forEach(n=>{const a=document.createElement("option");a.value=n,a.textContent=n,n===e.classAnySeleccionat&&(a.selected=!0),t.appendChild(a)}),t.addEventListener("change",()=>{e.classAnySeleccionat=parseInt(t.value,10),r()});const n=document.getElementById("classificacio-modalitat-buttons");n.querySelectorAll("button").forEach(t=>{t.dataset.mod===e.classModalitatSeleccionada&&t.classList.add("selected"),t.addEventListener("click",()=>{e.classModalitatSeleccionada=t.dataset.mod,n.querySelectorAll("button").forEach(e=>e.classList.remove("selected")),t.classList.add("selected"),r()})});const a=document.getElementById("categoria-buttons");a.innerHTML="",[...new Set(e.classificacions.map(e=>e.Categoria))].sort().forEach(t=>{const n=document.createElement("button");n.textContent=t,t===e.classCategoriaSeleccionada&&n.classList.add("selected"),n.addEventListener("click",()=>{e.classCategoriaSeleccionada=t,a.querySelectorAll("button").forEach(e=>e.classList.remove("selected")),n.classList.add("selected"),r()}),a.appendChild(n)})}(),document.getElementById("btn-agenda").click()}).catch(e=>{console.error("Error carregant dades",e)});var y=Object.freeze({__proto__:null,initGestioReptesAdmin:async function(){console.log("M√≤dul de gesti√≥ de reptes carregat")},mostraGestioReptes:async function(e){e.innerHTML="";const t=document.createElement("h3");t.textContent="Gesti√≥ de reptes",e.appendChild(t);try{const t=await fetch("/api/challenges"),n=await t.json(),a=document.createElement("pre");a.textContent=JSON.stringify(n,null,2),e.appendChild(a)}catch(t){const n=document.createElement("p");n.textContent="Error carregant reptes",e.appendChild(n)}}});
//# sourceMappingURL=main.js.map
